<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "68cd055621b3370948a5a1dff7bedc9a",
  "translation_date": "2025-08-26T20:33:14+00:00",
  "source_file": "03-GettingStarted/05-stdio-server/solution/python/README.md",
  "language_code": "th"
}
-->
# MCP stdio Server - Python Solution

> **⚠️ สำคัญ**: โซลูชันนี้ได้รับการอัปเดตเพื่อใช้ **stdio transport** ตามที่แนะนำใน MCP Specification 2025-06-18 โดยวิธีการส่งข้อมูลแบบ SSE เดิมได้ถูกยกเลิกแล้ว

## ภาพรวม

โซลูชัน Python นี้แสดงให้เห็นวิธีการสร้าง MCP server โดยใช้ stdio transport ในปัจจุบัน ซึ่ง stdio transport มีความเรียบง่าย ปลอดภัย และให้ประสิทธิภาพที่ดีกว่าวิธี SSE ที่ถูกยกเลิกไปแล้ว

## สิ่งที่ต้องเตรียม

- Python 3.8 หรือเวอร์ชันที่ใหม่กว่า
- แนะนำให้ติดตั้ง `uv` สำหรับการจัดการแพ็กเกจ ดู [คำแนะนำ](https://docs.astral.sh/uv/#highlights)

## คำแนะนำในการตั้งค่า

### ขั้นตอนที่ 1: สร้าง virtual environment

```bash
python -m venv venv
```

### ขั้นตอนที่ 2: เปิดใช้งาน virtual environment

**Windows:**
```bash
venv\Scripts\activate
```

**macOS/Linux:**
```bash
source venv/bin/activate
```

### ขั้นตอนที่ 3: ติดตั้ง dependencies

```bash
pip install mcp
```

## การรันเซิร์ฟเวอร์

เซิร์ฟเวอร์ stdio ทำงานแตกต่างจากเซิร์ฟเวอร์ SSE เดิม โดยแทนที่จะเริ่มต้นเว็บเซิร์ฟเวอร์ มันจะสื่อสารผ่าน stdin/stdout:

```bash
python server.py
```

**สำคัญ**: เซิร์ฟเวอร์อาจดูเหมือนค้าง - นี่เป็นเรื่องปกติ! มันกำลังรอข้อความ JSON-RPC จาก stdin

## การทดสอบเซิร์ฟเวอร์

### วิธีที่ 1: ใช้ MCP Inspector (แนะนำ)

```bash
npx @modelcontextprotocol/inspector python server.py
```

สิ่งนี้จะ:
1. เปิดเซิร์ฟเวอร์ของคุณเป็น subprocess
2. เปิดอินเทอร์เฟซเว็บสำหรับการทดสอบ
3. ให้คุณทดสอบเครื่องมือทั้งหมดของเซิร์ฟเวอร์แบบโต้ตอบ

### วิธีที่ 2: การทดสอบ JSON-RPC โดยตรง

คุณสามารถทดสอบโดยส่งข้อความ JSON-RPC โดยตรง:

1. เริ่มเซิร์ฟเวอร์: `python server.py`
2. ส่งข้อความ JSON-RPC (ตัวอย่าง):

```json
{"jsonrpc": "2.0", "id": 1, "method": "tools/list"}
```

3. เซิร์ฟเวอร์จะตอบกลับด้วยเครื่องมือที่มีอยู่

### เครื่องมือที่มีอยู่

เซิร์ฟเวอร์มีเครื่องมือดังนี้:

- **add(a, b)**: บวกตัวเลขสองตัวเข้าด้วยกัน
- **multiply(a, b)**: คูณตัวเลขสองตัวเข้าด้วยกัน  
- **get_greeting(name)**: สร้างข้อความทักทายแบบส่วนตัว
- **get_server_info()**: รับข้อมูลเกี่ยวกับเซิร์ฟเวอร์

### การทดสอบกับ Claude Desktop

เพื่อใช้เซิร์ฟเวอร์นี้กับ Claude Desktop ให้เพิ่มการตั้งค่านี้ลงใน `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "example-stdio-server": {
      "command": "python",
      "args": ["path/to/server.py"]
    }
  }
}
```

## ความแตกต่างสำคัญจาก SSE

**stdio transport (ปัจจุบัน):**
- ✅ ตั้งค่าง่ายกว่า - ไม่ต้องใช้เว็บเซิร์ฟเวอร์
- ✅ ปลอดภัยกว่า - ไม่มี HTTP endpoints
- ✅ การสื่อสารแบบ subprocess
- ✅ JSON-RPC ผ่าน stdin/stdout
- ✅ ประสิทธิภาพดีกว่า

**SSE transport (ถูกยกเลิก):**
- ❌ ต้องตั้งค่า HTTP server
- ❌ ต้องใช้เว็บเฟรมเวิร์ก (Starlette/FastAPI)
- ❌ การจัดการ routing และ session ซับซ้อนกว่า
- ❌ มีข้อพิจารณาด้านความปลอดภัยเพิ่มเติม
- ❌ ถูกยกเลิกใน MCP 2025-06-18

## เคล็ดลับการดีบัก

- ใช้ `stderr` สำหรับการล็อก (อย่าใช้ `stdout`)
- ทดสอบด้วย Inspector เพื่อการดีบักแบบภาพ
- ตรวจสอบให้แน่ใจว่าข้อความ JSON ทั้งหมดมีการแบ่งบรรทัด
- ตรวจสอบว่าเซิร์ฟเวอร์เริ่มต้นโดยไม่มีข้อผิดพลาด

โซลูชันนี้เป็นไปตาม MCP specification ปัจจุบันและแสดงให้เห็นถึงแนวทางปฏิบัติที่ดีที่สุดสำหรับการใช้งาน stdio transport

---

**ข้อจำกัดความรับผิดชอบ**:  
เอกสารนี้ได้รับการแปลโดยใช้บริการแปลภาษา AI [Co-op Translator](https://github.com/Azure/co-op-translator) แม้ว่าเราจะพยายามให้การแปลมีความถูกต้องมากที่สุด แต่โปรดทราบว่าการแปลโดยอัตโนมัติอาจมีข้อผิดพลาดหรือความไม่ถูกต้อง เอกสารต้นฉบับในภาษาดั้งเดิมควรถือเป็นแหล่งข้อมูลที่เชื่อถือได้ สำหรับข้อมูลที่สำคัญ ขอแนะนำให้ใช้บริการแปลภาษามืออาชีพ เราไม่รับผิดชอบต่อความเข้าใจผิดหรือการตีความผิดที่เกิดจากการใช้การแปลนี้