<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b2b9e15e78b9d9a2b3ff3e8fd7d1f434",
  "translation_date": "2025-08-19T19:20:30+00:00",
  "source_file": "02-Security/mcp-best-practices.md",
  "language_code": "uk"
}
-->
# Найкращі практики безпеки MCP 2025

Цей всеосяжний посібник описує основні найкращі практики безпеки для впровадження систем Model Context Protocol (MCP) на основі останньої **MCP Specification 2025-06-18** та сучасних галузевих стандартів. Ці практики охоплюють як традиційні питання безпеки, так і загрози, специфічні для штучного інтелекту, які є унікальними для розгортання MCP.

## Критичні вимоги до безпеки

### Обов’язкові заходи безпеки (вимоги MUST)

1. **Перевірка токенів**: MCP-сервери **НЕ ПОВИННІ** приймати жодні токени, які не були явно видані для самого MCP-сервера.
2. **Перевірка авторизації**: MCP-сервери, що реалізують авторизацію, **ПОВИННІ** перевіряти ВСІ вхідні запити та **НЕ ПОВИННІ** використовувати сесії для автентифікації.  
3. **Згода користувача**: MCP-проксі-сервери, які використовують статичні ідентифікатори клієнтів, **ПОВИННІ** отримувати явну згоду користувача для кожного динамічно зареєстрованого клієнта.
4. **Безпечні ідентифікатори сесій**: MCP-сервери **ПОВИННІ** використовувати криптографічно захищені, недетерміновані ідентифікатори сесій, згенеровані за допомогою надійних генераторів випадкових чисел.

## Основні практики безпеки

### 1. Перевірка та очищення вхідних даних
- **Комплексна перевірка вхідних даних**: Перевіряйте та очищуйте всі вхідні дані, щоб запобігти атакам ін’єкцій, проблемам із плутаниною ролей та вразливостям ін’єкцій у підказках.
- **Дотримання схем параметрів**: Реалізуйте сувору перевірку JSON-схем для всіх параметрів інструментів та вхідних даних API.
- **Фільтрація контенту**: Використовуйте Microsoft Prompt Shields та Azure Content Safety для фільтрації шкідливого контенту у підказках та відповідях.
- **Очищення вихідних даних**: Перевіряйте та очищуйте всі вихідні дані моделі перед їх відображенням користувачам або передачею у системи нижчого рівня.

### 2. Досконалість автентифікації та авторизації  
- **Зовнішні постачальники ідентифікації**: Делегуйте автентифікацію перевіреним постачальникам ідентифікації (Microsoft Entra ID, OAuth 2.1) замість створення власних механізмів.
- **Дрібнозернисті дозволи**: Реалізуйте детальні, специфічні для інструментів дозволи, дотримуючись принципу найменших привілеїв.
- **Управління життєвим циклом токенів**: Використовуйте короткострокові токени доступу з безпечною ротацією та належною перевіркою аудиторії.
- **Багатофакторна автентифікація**: Вимагайте MFA для всього адміністративного доступу та чутливих операцій.

### 3. Захищені протоколи зв’язку
- **Захист транспортного рівня**: Використовуйте HTTPS/TLS 1.3 для всіх комунікацій MCP із належною перевіркою сертифікатів.
- **Кінцеве шифрування**: Реалізуйте додаткові шари шифрування для особливо чутливих даних у процесі передачі та зберігання.
- **Управління сертифікатами**: Забезпечте належне управління життєвим циклом сертифікатів із автоматизованими процесами оновлення.
- **Примусове використання версій протоколу**: Використовуйте актуальну версію MCP-протоколу (2025-06-18) із належною узгодженістю версій.

### 4. Розширене обмеження швидкості та захист ресурсів
- **Багаторівневе обмеження швидкості**: Реалізуйте обмеження швидкості на рівні користувача, сесії, інструменту та ресурсу для запобігання зловживанням.
- **Адаптивне обмеження швидкості**: Використовуйте обмеження швидкості на основі машинного навчання, яке адаптується до моделей використання та індикаторів загроз.
- **Управління квотами ресурсів**: Встановлюйте відповідні обмеження для обчислювальних ресурсів, використання пам’яті та часу виконання.
- **Захист від DDoS-атак**: Розгорніть комплексні системи захисту від DDoS-атак та аналізу трафіку.

### 5. Комплексне ведення журналів та моніторинг
- **Структуроване ведення журналів аудиту**: Реалізуйте детальні, зручні для пошуку журнали для всіх операцій MCP, виконання інструментів та подій безпеки.
- **Моніторинг безпеки в реальному часі**: Розгорніть системи SIEM із підтримкою аномалій на основі ШІ для робочих навантажень MCP.
- **Ведення журналів із дотриманням конфіденційності**: Фіксуйте події безпеки, дотримуючись вимог конфіденційності даних та регуляторних норм.
- **Інтеграція реагування на інциденти**: Підключіть системи ведення журналів до автоматизованих робочих процесів реагування на інциденти.

### 6. Покращені практики безпечного зберігання
- **Апаратні модулі безпеки**: Використовуйте сховища ключів із підтримкою HSM (Azure Key Vault, AWS CloudHSM) для критичних криптографічних операцій.
- **Управління ключами шифрування**: Реалізуйте належну ротацію ключів, їх сегрегацію та контроль доступу.
- **Управління секретами**: Зберігайте всі API-ключі, токени та облікові дані в спеціалізованих системах управління секретами.
- **Класифікація даних**: Класифікуйте дані за рівнями чутливості та застосовуйте відповідні заходи захисту.

### 7. Розширене управління токенами
- **Запобігання передачі токенів**: Явно забороняйте передачу токенів, яка обходить заходи безпеки.
- **Перевірка аудиторії**: Завжди перевіряйте, чи відповідають твердження про аудиторію токена ідентичності MCP-сервера.
- **Авторизація на основі тверджень**: Реалізуйте детальну авторизацію на основі тверджень токенів та атрибутів користувачів.
- **Прив’язка токенів**: Прив’язуйте токени до конкретних сесій, користувачів або пристроїв, якщо це доречно.

### 8. Безпечне управління сесіями
- **Криптографічні ідентифікатори сесій**: Генеруйте ідентифікатори сесій за допомогою криптографічно захищених генераторів випадкових чисел (не передбачуваних послідовностей).
- **Прив’язка до користувача**: Прив’язуйте ідентифікатори сесій до інформації, специфічної для користувача, використовуючи безпечні формати, наприклад `<user_id>:<session_id>`.
- **Контроль життєвого циклу сесій**: Реалізуйте належне завершення, ротацію та анулювання сесій.
- **Заголовки безпеки сесій**: Використовуйте відповідні HTTP-заголовки безпеки для захисту сесій.

### 9. Специфічні для ШІ заходи безпеки
- **Захист від ін’єкцій у підказках**: Розгорніть Microsoft Prompt Shields із використанням технік виділення, роздільників та маркування даних.
- **Запобігання отруєнню інструментів**: Перевіряйте метадані інструментів, відстежуйте динамічні зміни та перевіряйте цілісність інструментів.
- **Перевірка вихідних даних моделі**: Скануйте вихідні дані моделі на предмет можливого витоку даних, шкідливого контенту або порушень політики безпеки.
- **Захист контекстного вікна**: Реалізуйте заходи для запобігання отруєнню контекстного вікна та маніпулятивним атакам.

### 10. Безпека виконання інструментів
- **Пісочниця для виконання**: Виконуйте інструменти в контейнеризованих, ізольованих середовищах із обмеженнями ресурсів.
- **Розділення привілеїв**: Виконуйте інструменти з мінімально необхідними привілеями та окремими обліковими записами служб.
- **Мережева ізоляція**: Реалізуйте сегментацію мережі для середовищ виконання інструментів.
- **Моніторинг виконання**: Відстежуйте виконання інструментів на предмет аномальної поведінки, використання ресурсів та порушень безпеки.

### 11. Постійна перевірка безпеки
- **Автоматизоване тестування безпеки**: Інтегруйте тестування безпеки в CI/CD-пайплайни за допомогою таких інструментів, як GitHub Advanced Security.
- **Управління вразливостями**: Регулярно скануйте всі залежності, включаючи моделі ШІ та зовнішні сервіси.
- **Тестування на проникнення**: Проводьте регулярні оцінки безпеки, орієнтовані на реалізації MCP.
- **Перевірка коду на безпеку**: Реалізуйте обов’язкові перевірки безпеки для всіх змін у коді, пов’язаному з MCP.

### 12. Безпека ланцюга постачання для ШІ
- **Перевірка компонентів**: Перевіряйте походження, цілісність та безпеку всіх компонентів ШІ (моделей, векторів, API).
- **Управління залежностями**: Ведіть актуальні інвентаризації всіх програмних та ШІ-залежностей із відстеженням вразливостей.
- **Довірені репозиторії**: Використовуйте перевірені, надійні джерела для всіх моделей ШІ, бібліотек та інструментів.
- **Моніторинг ланцюга постачання**: Постійно відстежуйте компрометації у постачальників ШІ-сервісів та репозиторіях моделей.

## Розширені шаблони безпеки

### Архітектура Zero Trust для MCP
- **Ніколи не довіряй, завжди перевіряй**: Реалізуйте постійну перевірку для всіх учасників MCP.
- **Мікросегментація**: Ізолюйте компоненти MCP за допомогою детального контролю мережі та ідентичності.
- **Умовний доступ**: Реалізуйте контроль доступу на основі ризиків, який адаптується до контексту та поведінки.
- **Постійна оцінка ризиків**: Динамічно оцінюйте стан безпеки на основі поточних індикаторів загроз.

### Реалізація ШІ з дотриманням конфіденційності
- **Мінімізація даних**: Розкривайте лише мінімально необхідні дані для кожної операції MCP.
- **Диференційована конфіденційність**: Реалізуйте техніки збереження конфіденційності для обробки чутливих даних.
- **Гомоморфне шифрування**: Використовуйте передові методи шифрування для безпечних обчислень над зашифрованими даними.
- **Федеративне навчання**: Реалізуйте розподілені підходи до навчання, які зберігають локальність даних та конфіденційність.

### Реагування на інциденти для систем ШІ
- **Процедури для інцидентів у ШІ**: Розробіть процедури реагування на інциденти, адаптовані до загроз, специфічних для ШІ та MCP.
- **Автоматизоване реагування**: Реалізуйте автоматизоване стримування та усунення поширених інцидентів безпеки ШІ.  
- **Можливості форензіки**: Забезпечте готовність до форензічного аналізу компрометацій систем ШІ та витоків даних.
- **Процедури відновлення**: Встановіть процедури відновлення після отруєння моделей ШІ, атак ін’єкцій у підказки та компрометацій сервісів.

## Ресурси для впровадження та стандарти

### Офіційна документація MCP
- [MCP Specification 2025-06-18](https://spec.modelcontextprotocol.io/specification/2025-06-18/) - Актуальна специфікація протоколу MCP
- [MCP Security Best Practices](https://modelcontextprotocol.io/specification/2025-06-18/basic/security_best_practices) - Офіційні рекомендації з безпеки
- [MCP Authorization Specification](https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization) - Шаблони автентифікації та авторизації
- [MCP Transport Security](https://modelcontextprotocol.io/specification/2025-06-18/transports/) - Вимоги до безпеки транспортного рівня

### Рішення Microsoft для безпеки
- [Microsoft Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection) - Захист від ін’єкцій у підказки
- [Azure Content Safety](https://learn.microsoft.com/azure/ai-services/content-safety/) - Комплексна фільтрація контенту ШІ
- [Microsoft Entra ID](https://learn.microsoft.com/entra/identity-platform/v2-oauth2-auth-code-flow) - Управління ідентичністю та доступом
- [Azure Key Vault](https://learn.microsoft.com/azure/key-vault/general/basic-concepts) - Безпечне управління секретами та обліковими даними
- [GitHub Advanced Security](https://github.com/security/advanced-security) - Сканування безпеки коду та ланцюга постачання

### Стандарти та фреймворки безпеки
- [OAuth 2.1 Security Best Practices](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-security-topics) - Актуальні рекомендації з безпеки OAuth
- [OWASP Top 10](https://owasp.org/www-project-top-ten/) - Ризики безпеки веб-додатків
- [OWASP Top 10 for LLMs](https://genai.owasp.org/download/43299/?tmstv=1731900559) - Ризики безпеки, специфічні для ШІ
- [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework) - Комплексне управління ризиками ШІ
- [ISO 27001:2022](https://www.iso.org/standard/27001) - Системи управління інформаційною безпекою

### Посібники та навчальні матеріали
- [Azure API Management as MCP Auth Gateway](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690) - Шаблони автентифікації для підприємств
- [Microsoft Entra ID with MCP Servers](https://den.dev/blog/mcp-server-auth-entra-id-session/) - Інтеграція постачальників ідентичності
- [Secure Token Storage Implementation](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2) - Найкращі практики управління токенами
- [End-to-End Encryption for AI](https://learn.microsoft.com/azure/architecture/example-scenario/confidential/end-to-end-encryption) - Шаблони роз
- **Розробка інструментів**: Розробляйте та поширюйте інструменти безпеки та бібліотеки для екосистеми MCP

---

*Цей документ відображає найкращі практики безпеки MCP станом на 18 серпня 2025 року, відповідно до специфікації MCP 2025-06-18. Практики безпеки слід регулярно переглядати та оновлювати, оскільки протокол і ландшафт загроз змінюються.*

**Відмова від відповідальності**:  
Цей документ було перекладено за допомогою сервісу автоматичного перекладу [Co-op Translator](https://github.com/Azure/co-op-translator). Хоча ми прагнемо до точності, зверніть увагу, що автоматичні переклади можуть містити помилки або неточності. Оригінальний документ на його рідній мові слід вважати авторитетним джерелом. Для критичної інформації рекомендується професійний людський переклад. Ми не несемо відповідальності за будь-які непорозуміння або неправильні тлумачення, що виникли внаслідок використання цього перекладу.