<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "fd28e690667b8ad84bb153cb025cfd73",
  "translation_date": "2025-10-07T01:15:15+00:00",
  "source_file": "03-GettingStarted/11-simple-auth/solution/python/README.md",
  "language_code": "ru"
}
-->
# Запуск примера

## Создание окружения

```sh
python -m venv venv
source ./venv/bin/activate
```

## Установка зависимостей

```sh
pip install "mcp[cli]" dotenv PyJWT requeests
```

## Генерация токена

Вам нужно будет сгенерировать токен, который клиент будет использовать для взаимодействия с сервером.

Выполните:

```sh
python util.py
```

## Запуск кода

Запустите код с помощью:

```sh
python server.py
```

В отдельном терминале введите:

```sh
python client.py
```

В терминале сервера вы должны увидеть что-то похожее на:

```text
Valid token, proceeding...
User exists, proceeding...
User has required scope, proceeding...
```

В окне клиента вы должны увидеть текст, похожий на:

```text
Tool result: meta=None content=[TextContent(type='text', text='{\n  "current_time": "2025-10-06T17:37:39.847457",\n  "timezone": "UTC",\n  "timestamp": 1759772259.847457,\n  "formatted": "2025-10-06 17:37:39"\n}', annotations=None, meta=None)] structuredContent={'current_time': '2025-10-06T17:37:39.847457', 'timezone': 'UTC', 'timestamp': 1759772259.847457, 'formatted': '2025-10-06 17:37:39'} isError=False
```

Это означает, что всё работает.

### Измените информацию, чтобы увидеть ошибку

Найдите этот код в *server.py*:

```python
 if not has_scope(has_header, "Admin.Write"):
```

Измените его так, чтобы он говорил "User.Write". Ваш текущий токен не имеет такого уровня разрешений, поэтому, если вы перезапустите сервер и попробуете снова запустить клиент, вы должны увидеть ошибку, похожую на следующую, в терминале сервера:

```text
Valid token, proceeding...
User exists, proceeding...
-> Missing required scope!
```

Вы можете либо вернуть исходный код сервера, либо сгенерировать новый токен, который содержит этот дополнительный уровень доступа — выбор за вами.

---

**Отказ от ответственности**:  
Этот документ был переведен с использованием сервиса автоматического перевода [Co-op Translator](https://github.com/Azure/co-op-translator). Хотя мы стремимся к точности, пожалуйста, учитывайте, что автоматические переводы могут содержать ошибки или неточности. Оригинальный документ на его родном языке следует считать авторитетным источником. Для получения критически важной информации рекомендуется профессиональный перевод человеком. Мы не несем ответственности за любые недоразумения или неправильные интерпретации, возникающие в результате использования данного перевода.