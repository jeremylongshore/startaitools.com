<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "057dd5cc6bea6434fdb788e6c93f3f3d",
  "translation_date": "2025-08-18T12:01:26+00:00",
  "source_file": "02-Security/mcp-security-best-practices-2025.md",
  "language_code": "fa"
}
-->
# بهترین روش‌های امنیتی MCP - به‌روزرسانی آگوست 2025

> **مهم**: این سند آخرین الزامات امنیتی [مشخصات MCP 2025-06-18](https://spec.modelcontextprotocol.io/specification/2025-06-18/) و [بهترین روش‌های امنیتی MCP](https://modelcontextprotocol.io/specification/2025-06-18/basic/security_best_practices) را منعکس می‌کند. همیشه به مشخصات فعلی برای راهنمایی به‌روز مراجعه کنید.

## روش‌های ضروری امنیتی برای پیاده‌سازی‌های MCP

پروتکل Model Context چالش‌های امنیتی منحصر به فردی را معرفی می‌کند که فراتر از امنیت سنتی نرم‌افزار است. این روش‌ها به الزامات امنیتی پایه و تهدیدات خاص MCP از جمله تزریق دستورات، مسمومیت ابزار، ربودن نشست، مشکلات نماینده گیج و آسیب‌پذیری‌های عبور توکن می‌پردازند.

### **الزامات امنیتی اجباری**

**الزامات حیاتی از مشخصات MCP:**

> **نباید**: سرورهای MCP **نباید** هیچ توکنی را که به‌طور صریح برای سرور MCP صادر نشده است، بپذیرند  
> 
> **باید**: سرورهای MCP که مجوزدهی را اجرا می‌کنند **باید** تمام درخواست‌های ورودی را تأیید کنند  
>  
> **نباید**: سرورهای MCP **نباید** از نشست‌ها برای احراز هویت استفاده کنند  
>
> **باید**: سرورهای پروکسی MCP که از شناسه‌های ثابت مشتری استفاده می‌کنند **باید** رضایت کاربر را برای هر مشتری ثبت‌شده پویا دریافت کنند  

---

## 1. **امنیت توکن و احراز هویت**

**کنترل‌های احراز هویت و مجوزدهی:**
   - **بررسی دقیق مجوزدهی**: ممیزی‌های جامع از منطق مجوزدهی سرور MCP انجام دهید تا اطمینان حاصل شود که فقط کاربران و مشتریان مورد نظر می‌توانند به منابع دسترسی داشته باشند  
   - **ادغام ارائه‌دهنده هویت خارجی**: از ارائه‌دهندگان هویت معتبر مانند Microsoft Entra ID استفاده کنید و از پیاده‌سازی احراز هویت سفارشی خودداری کنید  
   - **اعتبارسنجی مخاطب توکن**: همیشه بررسی کنید که توکن‌ها به‌طور صریح برای سرور MCP شما صادر شده‌اند - هرگز توکن‌های بالادستی را نپذیرید  
   - **چرخه عمر مناسب توکن**: چرخش امن توکن، سیاست‌های انقضا و جلوگیری از حملات بازپخش توکن را اجرا کنید  

**ذخیره‌سازی محافظت‌شده توکن:**
   - از Azure Key Vault یا ذخیره‌های امن مشابه برای تمام اسرار استفاده کنید  
   - رمزگذاری توکن‌ها را هم در حالت استراحت و هم در حالت انتقال اجرا کنید  
   - چرخش منظم اعتبارنامه و نظارت بر دسترسی غیرمجاز  

## 2. **مدیریت نشست و امنیت انتقال**

**روش‌های امن نشست:**
   - **شناسه‌های نشست رمزنگاری‌شده امن**: از شناسه‌های نشست امن و غیرقابل پیش‌بینی که با تولیدکننده‌های عدد تصادفی امن ایجاد شده‌اند استفاده کنید  
   - **اتصال خاص کاربر**: شناسه‌های نشست را به هویت‌های کاربر با فرمت‌هایی مانند `<user_id>:<session_id>` متصل کنید تا از سوءاستفاده نشست بین کاربران جلوگیری شود  
   - **مدیریت چرخه عمر نشست**: انقضا، چرخش و ابطال مناسب را اجرا کنید تا پنجره‌های آسیب‌پذیری محدود شوند  
   - **اجرای HTTPS/TLS**: ارتباط HTTPS اجباری برای جلوگیری از رهگیری شناسه‌های نشست  

**امنیت لایه انتقال:**
   - TLS 1.3 را در صورت امکان با مدیریت مناسب گواهی پیکربندی کنید  
   - پین کردن گواهی برای ارتباطات حیاتی را اجرا کنید  
   - چرخش منظم گواهی و تأیید اعتبار  

## 3. **محافظت در برابر تهدیدات خاص هوش مصنوعی** 🤖

**دفاع در برابر تزریق دستورات:**
   - **Microsoft Prompt Shields**: از Prompt Shields هوش مصنوعی برای تشخیص پیشرفته و فیلتر کردن دستورات مخرب استفاده کنید  
   - **پاکسازی ورودی‌ها**: تمام ورودی‌ها را اعتبارسنجی و پاکسازی کنید تا از حملات تزریق و مشکلات نماینده گیج جلوگیری شود  
   - **مرزهای محتوا**: از سیستم‌های علامت‌گذاری و مرزبندی محتوا برای تمایز بین دستورات معتبر و محتوای خارجی استفاده کنید  

**پیشگیری از مسمومیت ابزار:**
   - **اعتبارسنجی متاداده ابزار**: بررسی‌های یکپارچگی برای تعریف‌های ابزار اجرا کنید و تغییرات غیرمنتظره را نظارت کنید  
   - **نظارت پویا بر ابزار**: رفتار زمان اجرا را نظارت کنید و هشدارهایی برای الگوهای اجرای غیرمنتظره تنظیم کنید  
   - **گردش کارهای تأیید**: تأیید صریح کاربر را برای تغییرات ابزار و قابلیت‌ها الزامی کنید  

## 4. **کنترل دسترسی و مجوزها**

**اصل حداقل دسترسی:**
   - فقط حداقل مجوزهای لازم برای عملکرد مورد نظر را به سرورهای MCP اعطا کنید  
   - کنترل دسترسی مبتنی بر نقش (RBAC) با مجوزهای دقیق اجرا کنید  
   - بررسی‌های منظم مجوزها و نظارت مداوم برای افزایش سطح دسترسی  

**کنترل‌های مجوز زمان اجرا:**
   - محدودیت‌های منابع را برای جلوگیری از حملات خستگی منابع اعمال کنید  
   - از جداسازی کانتینر برای محیط‌های اجرای ابزار استفاده کنید  
   - دسترسی به‌موقع برای عملکردهای مدیریتی اجرا کنید  

## 5. **ایمنی محتوا و نظارت**

**اجرای ایمنی محتوا:**
   - **ادغام ایمنی محتوا Azure**: از Azure Content Safety برای تشخیص محتوای مضر، تلاش‌های فرار از محدودیت و نقض سیاست استفاده کنید  
   - **تحلیل رفتاری**: نظارت رفتاری زمان اجرا را برای تشخیص ناهنجاری‌ها در سرور MCP و اجرای ابزار اجرا کنید  
   - **ثبت جامع**: تمام تلاش‌های احراز هویت، فراخوانی ابزار و رویدادهای امنیتی را با ذخیره‌سازی امن و غیرقابل تغییر ثبت کنید  

**نظارت مداوم:**
   - هشدارهای زمان واقعی برای الگوهای مشکوک و تلاش‌های دسترسی غیرمجاز  
   - ادغام با سیستم‌های SIEM برای مدیریت متمرکز رویدادهای امنیتی  
   - ممیزی‌های امنیتی منظم و آزمایش نفوذ پیاده‌سازی‌های MCP  

## 6. **امنیت زنجیره تأمین**

**تأیید اجزا:**
   - **اسکن وابستگی‌ها**: از اسکن خودکار آسیب‌پذیری برای تمام وابستگی‌های نرم‌افزار و اجزای هوش مصنوعی استفاده کنید  
   - **اعتبارسنجی منشأ**: منشأ، مجوز و یکپارچگی مدل‌ها، منابع داده و خدمات خارجی را تأیید کنید  
   - **بسته‌های امضا شده**: از بسته‌های امضا شده رمزنگاری‌شده استفاده کنید و امضاها را قبل از استقرار تأیید کنید  

**خط لوله توسعه امن:**
   - **امنیت پیشرفته GitHub**: اسکن اسرار، تحلیل وابستگی‌ها و تحلیل ایستا CodeQL را اجرا کنید  
   - **امنیت CI/CD**: اعتبارسنجی امنیتی را در سراسر خطوط لوله استقرار خودکار ادغام کنید  
   - **یکپارچگی مصنوعات**: تأیید رمزنگاری برای مصنوعات و پیکربندی‌های مستقر اجرا کنید  

## 7. **امنیت OAuth و پیشگیری از نماینده گیج**

**پیاده‌سازی OAuth 2.1:**
   - **اجرای PKCE**: از Proof Key for Code Exchange (PKCE) برای تمام درخواست‌های مجوز استفاده کنید  
   - **رضایت صریح**: رضایت کاربر را برای هر مشتری ثبت‌شده پویا دریافت کنید تا از حملات نماینده گیج جلوگیری شود  
   - **اعتبارسنجی URI بازگشت**: اعتبارسنجی دقیق URI‌های بازگشت و شناسه‌های مشتری را اجرا کنید  

**امنیت پروکسی:**
   - جلوگیری از دور زدن مجوز از طریق سوءاستفاده از شناسه‌های ثابت مشتری  
   - گردش کارهای رضایت مناسب برای دسترسی به API‌های شخص ثالث اجرا کنید  
   - نظارت بر سرقت کد مجوز و دسترسی غیرمجاز به API  

## 8. **پاسخ به حادثه و بازیابی**

**قابلیت‌های پاسخ سریع:**
   - **پاسخ خودکار**: سیستم‌های خودکار برای چرخش اعتبارنامه و مهار تهدید اجرا کنید  
   - **روش‌های بازگشت**: توانایی بازگشت سریع به پیکربندی‌ها و اجزای معتبر  
   - **قابلیت‌های قانونی**: مسیرهای ممیزی دقیق و ثبت برای تحقیق حادثه  

**ارتباط و هماهنگی:**
   - روش‌های روشن برای تشدید حوادث امنیتی  
   - ادغام با تیم‌های پاسخ به حادثه سازمانی  
   - شبیه‌سازی‌های منظم حوادث امنیتی و تمرین‌های شبیه‌سازی  

## 9. **انطباق و حاکمیت**

**انطباق قانونی:**
   - اطمینان حاصل کنید که پیاده‌سازی‌های MCP الزامات خاص صنعت (GDPR، HIPAA، SOC 2) را برآورده می‌کنند  
   - کنترل‌های طبقه‌بندی داده و حریم خصوصی برای پردازش داده‌های هوش مصنوعی اجرا کنید  
   - مستندسازی جامع برای ممیزی انطباق حفظ کنید  

**مدیریت تغییرات:**
   - فرآیندهای بررسی امنیتی رسمی برای تمام تغییرات سیستم MCP  
   - کنترل نسخه و گردش کارهای تأیید برای تغییرات پیکربندی  
   - ارزیابی‌های انطباق منظم و تحلیل شکاف  

## 10. **کنترل‌های امنیتی پیشرفته**

**معماری اعتماد صفر:**
   - **هرگز اعتماد نکنید، همیشه تأیید کنید**: تأیید مداوم کاربران، دستگاه‌ها و ارتباطات  
   - **ریزتقسیم‌بندی**: کنترل‌های شبکه دقیق برای جداسازی اجزای فردی MCP  
   - **دسترسی شرطی**: کنترل‌های دسترسی مبتنی بر ریسک که با زمینه و رفتار فعلی سازگار هستند  

**محافظت از برنامه زمان اجرا:**
   - **محافظت از برنامه زمان اجرا (RASP)**: تکنیک‌های RASP را برای تشخیص تهدیدات زمان واقعی اجرا کنید  
   - **نظارت بر عملکرد برنامه**: نظارت بر ناهنجاری‌های عملکرد که ممکن است نشان‌دهنده حملات باشد  
   - **سیاست‌های امنیتی پویا**: سیاست‌های امنیتی را اجرا کنید که بر اساس چشم‌انداز تهدید فعلی سازگار هستند  

## 11. **ادغام اکوسیستم امنیتی مایکروسافت**

**امنیت جامع مایکروسافت:**
   - **Microsoft Defender for Cloud**: مدیریت وضعیت امنیتی ابری برای بارهای کاری MCP  
   - **Azure Sentinel**: قابلیت‌های SIEM و SOAR بومی ابری برای تشخیص تهدیدات پیشرفته  
   - **Microsoft Purview**: حاکمیت داده و انطباق برای جریان‌های کاری هوش مصنوعی و منابع داده  

**مدیریت هویت و دسترسی:**
   - **Microsoft Entra ID**: مدیریت هویت سازمانی با سیاست‌های دسترسی شرطی  
   - **مدیریت هویت ممتاز (PIM)**: دسترسی به‌موقع و گردش کارهای تأیید برای عملکردهای مدیریتی  
   - **محافظت از هویت**: دسترسی شرطی مبتنی بر ریسک و پاسخ خودکار به تهدیدات  

## 12. **تکامل مداوم امنیت**

**به‌روز ماندن:**
   - **نظارت بر مشخصات**: بررسی منظم به‌روزرسانی‌های مشخصات MCP و تغییرات راهنمای امنیتی  
   - **اطلاعات تهدید**: ادغام فیدهای تهدید خاص هوش مصنوعی و شاخص‌های سازش  
   - **مشارکت در جامعه امنیتی**: مشارکت فعال در جامعه امنیتی MCP و برنامه‌های افشای آسیب‌پذیری  

**امنیت تطبیقی:**
   - **امنیت یادگیری ماشین**: از تشخیص ناهنجاری مبتنی بر یادگیری ماشین برای شناسایی الگوهای حمله جدید استفاده کنید  
   - **تحلیل امنیت پیش‌بینی‌کننده**: مدل‌های پیش‌بینی‌کننده برای شناسایی تهدیدات پیشگیرانه اجرا کنید  
   - **اتوماسیون امنیتی**: به‌روزرسانی‌های خودکار سیاست‌های امنیتی بر اساس اطلاعات تهدید و تغییرات مشخصات  

---

## **منابع حیاتی امنیتی**

### **مستندات رسمی MCP**
- [مشخصات MCP (2025-06-18)](https://spec.modelcontextprotocol.io/specification/2025-06-18/)  
- [بهترین روش‌های امنیتی MCP](https://modelcontextprotocol.io/specification/2025-06-18/basic/security_best_practices)  
- [مشخصات مجوزدهی MCP](https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization)  

### **راه‌حل‌های امنیتی مایکروسافت**
- [Microsoft Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection)  
- [Azure Content Safety](https://learn.microsoft.com/azure/ai-services/content-safety/)  
- [امنیت Microsoft Entra ID](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)  
- [امنیت پیشرفته GitHub](https://github.com/security/advanced-security)  

### **استانداردهای امنیتی**
- [بهترین روش‌های امنیتی OAuth 2.0 (RFC 9700)](https://datatracker.ietf.org/doc/html/rfc9700)  
- [OWASP Top 10 برای مدل‌های زبان بزرگ](https://genai.owasp.org/)  
- [چارچوب مدیریت ریسک هوش مصنوعی NIST](https://www.nist.gov/itl/ai-risk-management-framework)  

### **راهنماهای پیاده‌سازی**
- [دروازه احراز هویت MCP مدیریت API Azure](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)  
- [Microsoft Entra ID با سرورهای MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)  

---

> **اطلاعیه امنیتی**: روش‌های امنیتی MCP به سرعت تکامل می‌یابند. همیشه قبل از پیاده‌سازی، مشخصات فعلی [MCP](https://spec.modelcontextprotocol.io/) و [مستندات امنیتی رسمی](https://modelcontextprotocol.io/specification/2025-06-18/basic/security_best_practices) را بررسی کنید.

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما برای دقت تلاش می‌کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادقتی‌ها باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، ترجمه حرفه‌ای انسانی توصیه می‌شود. ما هیچ مسئولیتی در قبال سوءتفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.