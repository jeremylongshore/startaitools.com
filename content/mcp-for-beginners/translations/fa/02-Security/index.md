<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1c767a35642f753127dc08545c25a290",
  "translation_date": "2025-08-18T12:04:21+00:00",
  "source_file": "02-Security/README.md",
  "language_code": "fa"
}
-->
# امنیت MCP: حفاظت جامع برای سیستم‌های هوش مصنوعی

[![بهترین روش‌های امنیت MCP](../../../translated_images/03.175aed6dedae133f9d41e49cefd0f0a9a39c3317e1eaa7ef7182696af7534308.fa.png)](https://youtu.be/88No8pw706o)

_(برای مشاهده ویدئوی این درس روی تصویر بالا کلیک کنید)_

امنیت بخش اساسی طراحی سیستم‌های هوش مصنوعی است، به همین دلیل آن را به عنوان بخش دوم اولویت‌بندی کرده‌ایم. این رویکرد با اصل **طراحی امن** مایکروسافت از [ابتکار آینده امن](https://www.microsoft.com/security/blog/2025/04/17/microsofts-secure-by-design-journey-one-year-of-success/) هم‌راستا است.

پروتکل مدل کانتکست (MCP) قابلیت‌های قدرتمند جدیدی را به برنامه‌های مبتنی بر هوش مصنوعی ارائه می‌دهد، اما چالش‌های امنیتی منحصربه‌فردی را نیز معرفی می‌کند که فراتر از خطرات نرم‌افزارهای سنتی است. سیستم‌های MCP با نگرانی‌های امنیتی شناخته‌شده (مانند کدنویسی امن، اصل حداقل دسترسی، امنیت زنجیره تأمین) و تهدیدات خاص هوش مصنوعی مانند تزریق دستورات، مسمومیت ابزارها، ربودن نشست‌ها، حملات نماینده گیج، آسیب‌پذیری‌های عبور توکن و تغییرات پویا در قابلیت‌ها مواجه هستند.

این درس به بررسی مهم‌ترین خطرات امنیتی در پیاده‌سازی‌های MCP می‌پردازد—شامل احراز هویت، مجوزدهی، دسترسی بیش از حد، تزریق دستورات غیرمستقیم، امنیت نشست‌ها، مشکلات نماینده گیج، مدیریت توکن و آسیب‌پذیری‌های زنجیره تأمین. شما کنترل‌های عملی و بهترین روش‌ها را برای کاهش این خطرات یاد خواهید گرفت و از راه‌حل‌های مایکروسافت مانند Prompt Shields، Azure Content Safety و GitHub Advanced Security برای تقویت پیاده‌سازی MCP خود بهره خواهید برد.

## اهداف آموزشی

در پایان این درس، شما قادر خواهید بود:

- **شناسایی تهدیدات خاص MCP**: خطرات امنیتی منحصربه‌فرد در سیستم‌های MCP مانند تزریق دستورات، مسمومیت ابزارها، دسترسی بیش از حد، ربودن نشست‌ها، مشکلات نماینده گیج، آسیب‌پذیری‌های عبور توکن و خطرات زنجیره تأمین را شناسایی کنید  
- **اعمال کنترل‌های امنیتی**: کاهش مؤثر خطرات از طریق احراز هویت قوی، دسترسی حداقل، مدیریت امن توکن، کنترل‌های امنیت نشست و تأیید زنجیره تأمین  
- **استفاده از راه‌حل‌های امنیتی مایکروسافت**: درک و پیاده‌سازی Microsoft Prompt Shields، Azure Content Safety و GitHub Advanced Security برای حفاظت از بار کاری MCP  
- **اعتبارسنجی امنیت ابزارها**: اهمیت اعتبارسنجی متادیتای ابزارها، نظارت بر تغییرات پویا و دفاع در برابر حملات تزریق دستورات غیرمستقیم را بشناسید  
- **ادغام بهترین روش‌ها**: ترکیب اصول امنیتی شناخته‌شده (کدنویسی امن، سخت‌سازی سرور، اعتماد صفر) با کنترل‌های خاص MCP برای حفاظت جامع  

# معماری امنیت MCP و کنترل‌ها

پیاده‌سازی‌های مدرن MCP نیازمند رویکردهای امنیتی لایه‌ای هستند که هم تهدیدات امنیتی نرم‌افزارهای سنتی و هم تهدیدات خاص هوش مصنوعی را پوشش دهند. مشخصات MCP که به سرعت در حال تکامل است، کنترل‌های امنیتی خود را بهبود می‌بخشد و امکان ادغام بهتر با معماری‌های امنیتی سازمانی و بهترین روش‌های شناخته‌شده را فراهم می‌کند.

تحقیقات [گزارش دفاع دیجیتال مایکروسافت](https://aka.ms/mddr) نشان می‌دهد که **۹۸٪ از نقض‌های گزارش‌شده با رعایت بهداشت امنیتی قوی قابل پیشگیری هستند**. مؤثرترین استراتژی حفاظت، ترکیب روش‌های امنیتی پایه با کنترل‌های خاص MCP است—اقدامات امنیتی پایه اثبات‌شده همچنان بیشترین تأثیر را در کاهش خطرات کلی امنیتی دارند.

## چشم‌انداز فعلی امنیت

> **توجه:** این اطلاعات استانداردهای امنیت MCP را تا تاریخ **۱۸ آگوست ۲۰۲۵** منعکس می‌کند. پروتکل MCP به سرعت در حال تکامل است و پیاده‌سازی‌های آینده ممکن است الگوهای جدید احراز هویت و کنترل‌های پیشرفته‌تری معرفی کنند. همیشه به [مشخصات فعلی MCP](https://spec.modelcontextprotocol.io/)، [مخزن GitHub MCP](https://github.com/modelcontextprotocol) و [مستندات بهترین روش‌های امنیتی](https://modelcontextprotocol.io/specification/2025-06-18/basic/security_best_practices) مراجعه کنید.

### تکامل احراز هویت MCP

مشخصات MCP در رویکرد خود به احراز هویت و مجوزدهی به طور قابل توجهی تکامل یافته است:

- **رویکرد اولیه**: مشخصات اولیه توسعه‌دهندگان را ملزم به پیاده‌سازی سرورهای احراز هویت سفارشی می‌کرد، در حالی که سرورهای MCP به عنوان سرورهای مجوز OAuth 2.0 عمل می‌کردند و احراز هویت کاربران را مستقیماً مدیریت می‌کردند  
- **استاندارد فعلی (۲۰۲۵-۰۶-۱۸)**: مشخصات به‌روزرسانی‌شده به سرورهای MCP اجازه می‌دهد احراز هویت را به ارائه‌دهندگان هویت خارجی (مانند Microsoft Entra ID) واگذار کنند، که وضعیت امنیتی را بهبود می‌بخشد و پیچیدگی پیاده‌سازی را کاهش می‌دهد  
- **امنیت لایه انتقال**: پشتیبانی پیشرفته از مکانیزم‌های انتقال امن با الگوهای احراز هویت مناسب برای اتصالات محلی (STDIO) و راه دور (Streamable HTTP)  

## امنیت احراز هویت و مجوزدهی

### چالش‌های امنیتی فعلی

پیاده‌سازی‌های مدرن MCP با چندین چالش در زمینه احراز هویت و مجوزدهی مواجه هستند:

### خطرات و بردارهای تهدید

- **منطق مجوزدهی اشتباه پیکربندی‌شده**: پیاده‌سازی ناقص مجوزدهی در سرورهای MCP می‌تواند داده‌های حساس را افشا کند و کنترل‌های دسترسی را به اشتباه اعمال کند  
- **مصادره توکن OAuth**: سرقت توکن‌های سرور MCP محلی به مهاجمان اجازه می‌دهد سرورها را جعل کنند و به خدمات پایین‌دستی دسترسی پیدا کنند  
- **آسیب‌پذیری‌های عبور توکن**: مدیریت نادرست توکن‌ها باعث ایجاد دور زدن کنترل‌های امنیتی و شکاف‌های حسابرسی می‌شود  
- **دسترسی بیش از حد**: سرورهای MCP با دسترسی بیش از حد اصول حداقل دسترسی را نقض می‌کنند و سطح حمله را گسترش می‌دهند  

#### عبور توکن: یک الگوی ضد حیاتی

**عبور توکن به طور صریح در مشخصات فعلی مجوزدهی MCP ممنوع است** به دلیل پیامدهای امنیتی شدید:

##### دور زدن کنترل‌های امنیتی
- سرورهای MCP و API‌های پایین‌دستی کنترل‌های امنیتی حیاتی (محدودیت نرخ، اعتبارسنجی درخواست، نظارت بر ترافیک) را اجرا می‌کنند که به اعتبارسنجی صحیح توکن‌ها وابسته هستند  
- استفاده مستقیم از توکن‌های مشتری به API باعث دور زدن این حفاظت‌های ضروری می‌شود و معماری امنیتی را تضعیف می‌کند  

##### چالش‌های حسابرسی و مسئولیت‌پذیری  
- سرورهای MCP نمی‌توانند بین مشتریانی که از توکن‌های صادرشده بالادستی استفاده می‌کنند تمایز قائل شوند، که مسیرهای حسابرسی را مختل می‌کند  
- گزارش‌های سرورهای منابع پایین‌دستی درخواست‌های مبهمی را نشان می‌دهند که منشأ واقعی آنها مشخص نیست  
- تحقیقات حادثه و حسابرسی‌های انطباق به طور قابل توجهی دشوارتر می‌شوند  

##### خطرات استخراج داده
- ادعاهای توکن تأیید‌نشده به بازیگران مخرب با توکن‌های سرقت‌شده اجازه می‌دهد از سرورهای MCP به عنوان پروکسی برای استخراج داده استفاده کنند  
- نقض مرزهای اعتماد الگوهای دسترسی غیرمجاز را ایجاد می‌کند که کنترل‌های امنیتی مورد نظر را دور می‌زنند  

##### بردارهای حمله چند‌سرویسی
- توکن‌های مصادره‌شده که توسط چندین سرویس پذیرفته می‌شوند امکان حرکت جانبی در سیستم‌های متصل را فراهم می‌کنند  
- فرضیات اعتماد بین سرویس‌ها ممکن است زمانی که منشأ توکن‌ها قابل تأیید نیست نقض شوند  

### کنترل‌ها و کاهش‌های امنیتی

**الزامات امنیتی حیاتی:**

> **اجباری**: سرورهای MCP **نباید** هیچ توکنی را که به طور صریح برای سرور MCP صادر نشده است بپذیرند  

#### کنترل‌های احراز هویت و مجوزدهی

- **بررسی دقیق مجوزدهی**: ممیزی‌های جامع منطق مجوزدهی سرور MCP را انجام دهید تا اطمینان حاصل شود که فقط کاربران و مشتریان مورد نظر می‌توانند به منابع حساس دسترسی پیدا کنند  
  - **راهنمای پیاده‌سازی**: [مدیریت API Azure به عنوان دروازه احراز هویت برای سرورهای MCP](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)  
  - **ادغام هویت**: [استفاده از Microsoft Entra ID برای احراز هویت سرور MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)  

- **مدیریت امن توکن**: پیاده‌سازی [بهترین روش‌های اعتبارسنجی و چرخه عمر توکن مایکروسافت](https://learn.microsoft.com/en-us/entra/identity-platform/access-tokens)  
  - اعتبارسنجی ادعاهای مخاطب توکن‌ها با هویت سرور MCP  
  - پیاده‌سازی سیاست‌های مناسب چرخش و انقضای توکن  
  - جلوگیری از حملات بازپخش توکن و استفاده غیرمجاز  

- **ذخیره امن توکن**: ذخیره امن توکن با رمزگذاری در حالت استراحت و انتقال  
  - **بهترین روش‌ها**: [راهنمای ذخیره امن توکن و رمزگذاری](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)  

#### پیاده‌سازی کنترل‌های دسترسی

- **اصل حداقل دسترسی**: به سرورهای MCP فقط حداقل دسترسی لازم برای عملکرد مورد نظر را اعطا کنید  
  - بررسی‌های منظم مجوزها و به‌روزرسانی‌ها برای جلوگیری از افزایش دسترسی  
  - **مستندات مایکروسافت**: [دسترسی امن با حداقل مجوز](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)  

- **کنترل دسترسی مبتنی بر نقش (RBAC)**: پیاده‌سازی تخصیص نقش‌های دقیق  
  - نقش‌ها را به طور دقیق به منابع و اقدامات خاص محدود کنید  
  - از مجوزهای گسترده یا غیرضروری که سطح حمله را گسترش می‌دهند اجتناب کنید  

- **نظارت مستمر بر مجوزها**: ممیزی و نظارت مداوم بر دسترسی‌ها  
  - نظارت بر الگوهای استفاده از مجوزها برای شناسایی ناهنجاری‌ها  
  - رفع سریع دسترسی‌های بیش از حد یا استفاده‌نشده  

## تهدیدات امنیتی خاص هوش مصنوعی

### حملات تزریق دستورات و دستکاری ابزارها

پیاده‌سازی‌های مدرن MCP با بردارهای حمله پیچیده خاص هوش مصنوعی مواجه هستند که اقدامات امنیتی سنتی نمی‌توانند به طور کامل آنها را پوشش دهند:

#### **تزریق دستورات غیرمستقیم (تزریق دستورات بین‌دامنه)**

**تزریق دستورات غیرمستقیم** یکی از آسیب‌پذیری‌های حیاتی در سیستم‌های هوش مصنوعی مبتنی بر MCP است. مهاجمان دستورالعمل‌های مخرب را در محتوای خارجی—اسناد، صفحات وب، ایمیل‌ها یا منابع داده—جاسازی می‌کنند که سیستم‌های هوش مصنوعی آنها را به عنوان دستورات قانونی پردازش می‌کنند.

**سناریوهای حمله:**
- **تزریق مبتنی بر سند**: دستورالعمل‌های مخرب پنهان در اسناد پردازش‌شده که اقدامات ناخواسته هوش مصنوعی را تحریک می‌کنند  
- **استفاده از محتوای وب**: صفحات وب آلوده حاوی دستورات جاسازی‌شده که رفتار هوش مصنوعی را هنگام استخراج داده‌ها دستکاری می‌کنند  
- **حملات مبتنی بر ایمیل**: دستورات مخرب در ایمیل‌ها که باعث نشت اطلاعات یا انجام اقدامات غیرمجاز توسط دستیارهای هوش مصنوعی می‌شوند  
- **آلودگی منابع داده**: پایگاه‌های داده یا API‌های آلوده که محتوای آلوده را به سیستم‌های هوش مصنوعی ارائه می‌دهند  

**تأثیر واقعی**: این حملات می‌توانند منجر به استخراج داده‌ها، نقض حریم خصوصی، تولید محتوای مضر و دستکاری تعاملات کاربران شوند. برای تحلیل دقیق، به [تزریق دستورات در MCP (سایمون ویلیسون)](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/) مراجعه کنید.

![نمودار حمله تزریق دستورات](../../../translated_images/prompt-injection.ed9fbfde297ca877c15bc6daa808681cd3c3dc7bf27bbbda342ef1ba5fc4f52d.fa.png)

#### **حملات مسمومیت ابزارها**

**مسمومیت ابزارها** متادیتای تعریف‌کننده ابزارهای MCP را هدف قرار می‌دهد و از نحوه تفسیر توضیحات ابزارها و پارامترها توسط مدل‌های زبانی برای تصمیم‌گیری در اجرای دستورات سوءاستفاده می‌کند.

**مکانیزم‌های حمله:**
- **دستکاری متادیتا**: مهاجمان دستورالعمل‌های مخرب را در توضیحات ابزارها، تعریف پارامترها یا مثال‌های استفاده تزریق می‌کنند  
- **دستورالعمل‌های نامرئی**: دستورات پنهان در متادیتای ابزارها که توسط مدل‌های هوش مصنوعی پردازش می‌شوند اما برای کاربران انسانی نامرئی هستند  
- **تغییرات پویا ابزار ("کشیدن فرش")**: ابزارهایی که توسط کاربران تأیید شده‌اند بعداً برای انجام اقدامات مخرب بدون آگاهی کاربران تغییر داده می‌شوند  
- **تزریق پارامترها**: محتوای مخرب جاسازی‌شده در طرح‌های پارامتر ابزارها که رفتار مدل را تحت تأثیر قرار می‌دهد  

**خطرات سرورهای میزبانی‌شده**: سرورهای MCP راه دور خطرات بیشتری را ایجاد می‌کنند زیرا تعریف ابزارها می‌تواند پس از تأیید اولیه کاربران به‌روزرسانی شود، که سناریوهایی را ایجاد می‌کند که ابزارهای قبلاً امن به ابزارهای مخرب تبدیل می‌شوند. برای تحلیل جامع، به [حملات مسمومیت ابزارها (Invariant Labs)](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks) مراجعه کنید.

![نمودار حمله تزریق ابزار](../../../translated_images/tool-injection.3b0b4a6b24de6befe7d3afdeae44138ef005881aebcfc84c6f61369ce31e3640.fa.png)

#### **بردارهای حمله اضافی هوش مصنوعی**

- **تزریق دستورات بین‌دامنه (XPIA)**: حملات پیچیده‌ای که از محتوای چند دامنه برای دور زدن کنترل‌های امنیتی استفاده می‌کنند  
- **تغییرات پویا قابلیت‌ها**: تغییرات لحظه‌ای در قابلیت‌های ابزارها که از ارزیابی‌های امنیتی اولیه فرار می‌کنند  
- **آلودگی پنجره زمینه**: حملاتی که پنجره‌های زمینه بزرگ را دستکاری می‌کنند تا دستورالعمل‌های مخرب را پنهان کنند  
- **حملات سردرگمی مدل**: سوءاستفاده از محدودیت‌های مدل برای ایجاد رفتارهای غیرقابل پیش‌بینی یا ناامن  

### تأثیر خطرات امنیتی هوش مصنوعی

**پیامدهای با تأثیر بالا:**
- **استخراج داده‌ها**: دسترسی غیرمجاز و سرقت داده‌های حساس سازمانی یا شخصی  
- **نقض حریم خصوصی**: افشای اطلاعات شناسایی شخصی (PII) و داده‌های محرمانه کسب‌وکار  
- **دستکاری سیستم**: تغییرات ناخواسته در سیستم‌ها و جریان‌های کاری حیاتی  
- **سرقت اعتبارنامه‌ها**: مصادره توکن‌های احراز هویت و اعتبارنامه‌های خدمات  
- **حرکت جانبی**: استفاده از سیستم‌های هوش مصنوعی آلوده به عنوان نقاط محوری برای حملات گسترده‌تر شبکه  

### راه‌حل‌های امنیتی هوش مصنوعی مایکروسافت

#### **AI Prompt Shields: حفاظت پیشرفته در برابر حملات تزریق دستورات**

مایکروسافت **AI Prompt Shields** دفاع جامع در برابر حملات تزریق دستورات مستقیم و غیرمستقیم را از طریق لایه‌های امنیتی متعدد ارائه می‌دهد:

##### **مکانیزم‌های حفاظت اصلی:**

1. **تشخیص و فیلتر پیشرفته**
   - الگوریتم‌های یادگیری ماشین و تکنیک‌های پردازش زبان طبیعی دستورالعمل‌های مخرب در محتوای خارجی را تشخیص می‌دهند  
   - تحلیل لحظه‌ای اسناد، صفحات وب، ایمیل‌ها و منابع داده برای تهدیدات جاسازی‌شده  
   - درک زمینه‌ای الگوهای دستورات قانونی در مقابل مخرب  

2. **تکنیک‌های برجسته‌سازی**  
   - تمایز بین دستورالعمل‌های سیستم قابل اعتماد و ورودی‌های خارجی بالقوه آلوده  
   - روش‌های تبدیل متن که ارتباط مدل را افزایش می‌دهند و در عین حال محتوای مخرب را جدا می‌کنند  
   - کمک به سیستم‌های هوش مصنوعی برای حفظ سلسله‌مراتب دستورالعمل‌ها و نادیده گرفتن دستورات تزریق‌شده  

3. **سیستم‌های مرزبندی و علامت‌گذاری داده‌ها**
   - تعریف مرزهای صریح بین
- **تولید نشست امن**: از شناسه‌های نشست غیرقابل پیش‌بینی و امن که با تولیدکننده‌های عدد تصادفی امن ایجاد می‌شوند استفاده کنید  
- **اتصال به اطلاعات کاربر**: شناسه‌های نشست را به اطلاعات خاص کاربر متصل کنید، مانند فرمت `<user_id>:<session_id>`، تا از سوءاستفاده نشست‌های بین کاربران جلوگیری شود  
- **مدیریت چرخه عمر نشست**: انقضا، چرخش و ابطال مناسب را پیاده‌سازی کنید تا پنجره‌های آسیب‌پذیری محدود شوند  
- **امنیت انتقال**: استفاده از HTTPS برای تمام ارتباطات الزامی است تا از رهگیری شناسه‌های نشست جلوگیری شود  

### مشکل نماینده گیج  

مشکل **نماینده گیج** زمانی رخ می‌دهد که سرورهای MCP به عنوان پروکسی احراز هویت بین مشتریان و خدمات شخص ثالث عمل می‌کنند، و فرصت‌هایی برای دور زدن مجوز از طریق سوءاستفاده از شناسه‌های مشتری ثابت ایجاد می‌شود.

#### **مکانیک حمله و خطرات**

- **دور زدن رضایت مبتنی بر کوکی**: احراز هویت قبلی کاربر کوکی‌های رضایت ایجاد می‌کند که مهاجمان از طریق درخواست‌های مجوز مخرب با URI‌های بازگشت ساخته‌شده سوءاستفاده می‌کنند  
- **سرقت کد مجوز**: کوکی‌های رضایت موجود ممکن است باعث شوند سرورهای مجوز صفحه‌های رضایت را رد کنند و کدها را به نقاط پایانی تحت کنترل مهاجم هدایت کنند  
- **دسترسی غیرمجاز به API**: کدهای مجوز دزدیده‌شده امکان تبادل توکن و جعل هویت کاربر را بدون تأیید صریح فراهم می‌کنند  

#### **استراتژی‌های کاهش خطر**

**کنترل‌های الزامی:**
- **الزامات رضایت صریح**: سرورهای پروکسی MCP که از شناسه‌های مشتری ثابت استفاده می‌کنند **باید** برای هر مشتری ثبت‌شده پویا رضایت کاربر را دریافت کنند  
- **اجرای امنیت OAuth 2.1**: بهترین شیوه‌های امنیتی فعلی OAuth، از جمله PKCE (اثبات کلید برای تبادل کد) را برای تمام درخواست‌های مجوز دنبال کنید  
- **اعتبارسنجی دقیق مشتری**: اعتبارسنجی دقیق URI‌های بازگشت و شناسه‌های مشتری را برای جلوگیری از سوءاستفاده پیاده‌سازی کنید  

### آسیب‌پذیری‌های عبور توکن  

**عبور توکن** یک الگوی ضد صریح است که در آن سرورهای MCP توکن‌های مشتری را بدون اعتبارسنجی مناسب می‌پذیرند و آنها را به API‌های پایین‌دستی ارسال می‌کنند، که مشخصات مجوز MCP را نقض می‌کند.

#### **پیامدهای امنیتی**

- **دور زدن کنترل‌ها**: استفاده مستقیم از توکن‌های مشتری به API کنترل‌های حیاتی مانند محدودیت نرخ، اعتبارسنجی و نظارت را دور می‌زند  
- **خراب شدن ردپای حسابرسی**: توکن‌های صادرشده بالادستی شناسایی مشتری را غیرممکن می‌کنند و قابلیت‌های تحقیق حادثه را مختل می‌کنند  
- **نفوذ داده مبتنی بر پروکسی**: توکن‌های غیرمعتبر به بازیگران مخرب اجازه می‌دهند از سرورها به عنوان پروکسی برای دسترسی غیرمجاز به داده‌ها استفاده کنند  
- **نقض مرزهای اعتماد**: فرضیات اعتماد خدمات پایین‌دستی ممکن است زمانی که منشأ توکن‌ها قابل تأیید نیست نقض شوند  
- **گسترش حمله چند‌خدمتی**: توکن‌های به خطر افتاده که در چندین سرویس پذیرفته می‌شوند امکان حرکت جانبی را فراهم می‌کنند  

#### **کنترل‌های امنیتی مورد نیاز**

**الزامات غیرقابل مذاکره:**
- **اعتبارسنجی توکن**: سرورهای MCP **نباید** توکن‌هایی را بپذیرند که صراحتاً برای سرور MCP صادر نشده‌اند  
- **اعتبارسنجی مخاطب**: همیشه ادعاهای مخاطب توکن را اعتبارسنجی کنید تا با هویت سرور MCP مطابقت داشته باشد  
- **چرخه عمر مناسب توکن**: توکن‌های دسترسی کوتاه‌مدت با شیوه‌های چرخش امن را پیاده‌سازی کنید  

## امنیت زنجیره تأمین برای سیستم‌های هوش مصنوعی  

امنیت زنجیره تأمین فراتر از وابستگی‌های نرم‌افزاری سنتی تکامل یافته است تا کل اکوسیستم هوش مصنوعی را شامل شود. پیاده‌سازی‌های مدرن MCP باید تمام اجزای مرتبط با هوش مصنوعی را به دقت تأیید و نظارت کنند، زیرا هر کدام آسیب‌پذیری‌های بالقوه‌ای را معرفی می‌کنند که می‌توانند یکپارچگی سیستم را به خطر بیندازند.

### اجزای گسترش‌یافته زنجیره تأمین هوش مصنوعی  

**وابستگی‌های نرم‌افزاری سنتی:**
- کتابخانه‌ها و چارچوب‌های متن‌باز  
- تصاویر کانتینر و سیستم‌های پایه  
- ابزارهای توسعه و خطوط لوله ساخت  
- اجزای زیرساخت و خدمات  

**عناصر خاص زنجیره تأمین هوش مصنوعی:**
- **مدل‌های پایه**: مدل‌های از پیش آموزش‌دیده از ارائه‌دهندگان مختلف که نیاز به تأیید منشأ دارند  
- **خدمات جاسازی**: خدمات بردارسازی و جستجوی معنایی خارجی  
- **ارائه‌دهندگان زمینه**: منابع داده، پایگاه‌های دانش و مخازن اسناد  
- **API‌های شخص ثالث**: خدمات هوش مصنوعی خارجی، خطوط لوله یادگیری ماشین و نقاط پایانی پردازش داده  
- **مصنوعات مدل**: وزن‌ها، پیکربندی‌ها و انواع مدل‌های تنظیم‌شده  
- **منابع داده آموزشی**: مجموعه داده‌هایی که برای آموزش و تنظیم مدل استفاده می‌شوند  

### استراتژی جامع امنیت زنجیره تأمین  

#### **تأیید و اعتماد اجزا**
- **تأیید منشأ**: منشأ، مجوز و یکپارچگی تمام اجزای هوش مصنوعی را قبل از ادغام تأیید کنید  
- **ارزیابی امنیتی**: اسکن آسیب‌پذیری و بررسی‌های امنیتی برای مدل‌ها، منابع داده و خدمات هوش مصنوعی انجام دهید  
- **تحلیل شهرت**: سابقه امنیتی و شیوه‌های ارائه‌دهندگان خدمات هوش مصنوعی را ارزیابی کنید  
- **تأیید انطباق**: اطمینان حاصل کنید که تمام اجزا الزامات امنیتی و مقررات سازمانی را برآورده می‌کنند  

#### **خطوط لوله استقرار امن**  
- **امنیت CI/CD خودکار**: اسکن امنیتی را در سراسر خطوط لوله استقرار خودکار ادغام کنید  
- **یکپارچگی مصنوعات**: تأیید رمزنگاری برای تمام مصنوعات مستقر (کد، مدل‌ها، پیکربندی‌ها) را پیاده‌سازی کنید  
- **استقرار مرحله‌ای**: از استراتژی‌های استقرار تدریجی با اعتبارسنجی امنیتی در هر مرحله استفاده کنید  
- **مخازن مصنوعات قابل اعتماد**: فقط از رجیستری‌ها و مخازن مصنوعات تأیید‌شده و امن مستقر کنید  

#### **نظارت و پاسخگویی مداوم**
- **اسکن وابستگی**: نظارت مداوم بر آسیب‌پذیری‌ها برای تمام وابستگی‌های نرم‌افزاری و اجزای هوش مصنوعی  
- **نظارت بر مدل**: ارزیابی مداوم رفتار مدل، انحراف عملکرد و ناهنجاری‌های امنیتی  
- **ردیابی سلامت خدمات**: نظارت بر خدمات هوش مصنوعی خارجی برای در دسترس بودن، حوادث امنیتی و تغییرات سیاست  
- **ادغام اطلاعات تهدید**: تغذیه‌های تهدید خاص برای خطرات امنیتی هوش مصنوعی و یادگیری ماشین را ادغام کنید  

#### **کنترل دسترسی و حداقل امتیاز**
- **مجوزهای سطح اجزا**: دسترسی به مدل‌ها، داده‌ها و خدمات را بر اساس ضرورت کسب‌وکار محدود کنید  
- **مدیریت حساب‌های خدمات**: حساب‌های خدمات اختصاصی با حداقل امتیازات مورد نیاز را پیاده‌سازی کنید  
- **تقسیم‌بندی شبکه**: اجزای هوش مصنوعی را جدا کنید و دسترسی شبکه بین خدمات را محدود کنید  
- **کنترل‌های دروازه API**: از دروازه‌های API متمرکز برای کنترل و نظارت بر دسترسی به خدمات هوش مصنوعی خارجی استفاده کنید  

#### **پاسخ به حادثه و بازیابی**
- **روش‌های پاسخ سریع**: فرآیندهای مشخص برای وصله یا جایگزینی اجزای هوش مصنوعی به خطر افتاده  
- **چرخش اعتبارنامه**: سیستم‌های خودکار برای چرخش اسرار، کلیدهای API و اعتبارنامه‌های خدمات  
- **قابلیت‌های بازگشت**: توانایی بازگشت سریع به نسخه‌های قبلی اجزای هوش مصنوعی  
- **بازیابی نقض زنجیره تأمین**: روش‌های خاص برای پاسخ به مصالحه‌های خدمات هوش مصنوعی بالادستی  

### ابزارهای امنیتی مایکروسافت و ادغام  

**GitHub Advanced Security** حفاظت جامع زنجیره تأمین را ارائه می‌دهد، از جمله:  
- **اسکن اسرار**: شناسایی خودکار اعتبارنامه‌ها، کلیدهای API و توکن‌ها در مخازن  
- **اسکن وابستگی**: ارزیابی آسیب‌پذیری برای وابستگی‌ها و کتابخانه‌های متن‌باز  
- **تحلیل CodeQL**: تحلیل کد ایستا برای آسیب‌پذیری‌های امنیتی و مشکلات کدنویسی  
- **بینش زنجیره تأمین**: دید به سلامت وابستگی‌ها و وضعیت امنیتی  

**ادغام Azure DevOps و Azure Repos:**  
- ادغام اسکن امنیتی بدون درز در سراسر پلتفرم‌های توسعه مایکروسافت  
- بررسی‌های امنیتی خودکار در Azure Pipelines برای بارهای کاری هوش مصنوعی  
- اجرای سیاست برای استقرار اجزای امن هوش مصنوعی  

**شیوه‌های داخلی مایکروسافت:**  
مایکروسافت شیوه‌های امنیت زنجیره تأمین گسترده‌ای را در تمام محصولات پیاده‌سازی می‌کند. درباره رویکردهای اثبات‌شده در [سفر به امنیت زنجیره تأمین نرم‌افزار در مایکروسافت](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/) بیشتر بدانید.  

...
### **راهکارهای امنیتی مایکروسافت**
- [مستندات Microsoft Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection)
- [سرویس ایمنی محتوا Azure](https://learn.microsoft.com/azure/ai-services/content-safety/)
- [امنیت Microsoft Entra ID](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)
- [بهترین روش‌های مدیریت توکن Azure](https://learn.microsoft.com/entra/identity-platform/access-tokens)
- [امنیت پیشرفته GitHub](https://github.com/security/advanced-security)

### **راهنماها و آموزش‌های پیاده‌سازی**
- [مدیریت API Azure به عنوان دروازه احراز هویت MCP](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
- [احراز هویت Microsoft Entra ID با سرورهای MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)
- [ذخیره امن توکن و رمزنگاری (ویدیو)](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)

### **امنیت DevOps و زنجیره تأمین**
- [امنیت Azure DevOps](https://azure.microsoft.com/products/devops)
- [امنیت Azure Repos](https://azure.microsoft.com/products/devops/repos/)
- [مسیر امنیت زنجیره تأمین مایکروسافت](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/)

## **مستندات امنیتی اضافی**

برای راهنمایی جامع در زمینه امنیت، به این اسناد تخصصی در این بخش مراجعه کنید:

- **[بهترین روش‌های امنیت MCP 2025](./mcp-security-best-practices-2025.md)** - بهترین روش‌های امنیتی کامل برای پیاده‌سازی‌های MCP  
- **[پیاده‌سازی ایمنی محتوا Azure](./azure-content-safety-implementation.md)** - نمونه‌های عملی برای یکپارچه‌سازی ایمنی محتوا Azure  
- **[کنترل‌های امنیتی MCP 2025](./mcp-security-controls-2025.md)** - جدیدترین کنترل‌ها و تکنیک‌های امنیتی برای استقرارهای MCP  
- **[راهنمای سریع بهترین روش‌های MCP](./mcp-best-practices.md)** - راهنمای سریع برای روش‌های امنیتی ضروری MCP  

---

## مرحله بعد

بعدی: [فصل ۳: شروع به کار](../03-GettingStarted/README.md)

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما برای دقت تلاش می‌کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌هایی باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، ترجمه حرفه‌ای انسانی توصیه می‌شود. ما هیچ مسئولیتی در قبال سوءتفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.