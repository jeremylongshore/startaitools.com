<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "9d799c4a30a8383e0a74af9153262972",
  "translation_date": "2025-08-26T20:05:49+00:00",
  "source_file": "03-GettingStarted/05-stdio-server/solution/typescript/README.md",
  "language_code": "fa"
}
-->
# MCP stdio Server - راه‌حل TypeScript

> **⚠️ مهم**: این راه‌حل به‌روزرسانی شده است تا از **حمل‌ونقل stdio** استفاده کند، همان‌طور که در مشخصات MCP 2025-06-18 توصیه شده است. روش حمل‌ونقل SSE اصلی منسوخ شده است.

## نمای کلی

این راه‌حل TypeScript نشان می‌دهد که چگونه می‌توان یک سرور MCP با استفاده از حمل‌ونقل فعلی stdio ساخت. حمل‌ونقل stdio ساده‌تر، امن‌تر و عملکرد بهتری نسبت به روش منسوخ شده SSE ارائه می‌دهد.

## پیش‌نیازها

- Node.js نسخه 18 یا بالاتر
- مدیر بسته npm یا yarn

## دستورالعمل‌های راه‌اندازی

### مرحله ۱: نصب وابستگی‌ها

```bash
npm install
```

### مرحله ۲: ساخت پروژه

```bash
npm run build
```

## اجرای سرور

سرور stdio به‌طور متفاوتی نسبت به سرور قدیمی SSE اجرا می‌شود. به جای راه‌اندازی یک سرور وب، از طریق stdin/stdout ارتباط برقرار می‌کند:

```bash
npm start
```

**مهم**: ممکن است سرور به نظر برسد که متوقف شده است - این طبیعی است! سرور منتظر پیام‌های JSON-RPC از stdin است.

## آزمایش سرور

### روش ۱: استفاده از MCP Inspector (توصیه‌شده)

```bash
npm run inspector
```

این کار موارد زیر را انجام می‌دهد:
1. سرور شما را به‌عنوان یک زیر‌فرآیند اجرا می‌کند
2. یک رابط وب برای آزمایش باز می‌کند
3. به شما امکان می‌دهد تمام ابزارهای سرور را به‌صورت تعاملی آزمایش کنید

### روش ۲: آزمایش مستقیم از طریق خط فرمان

همچنین می‌توانید با اجرای مستقیم Inspector آزمایش کنید:

```bash
npx @modelcontextprotocol/inspector node build/index.js
```

### ابزارهای موجود

سرور ابزارهای زیر را ارائه می‌دهد:

- **add(a, b)**: جمع دو عدد
- **multiply(a, b)**: ضرب دو عدد  
- **get_greeting(name)**: ایجاد یک پیام خوش‌آمدگویی شخصی‌سازی‌شده
- **get_server_info()**: دریافت اطلاعات درباره سرور

### آزمایش با Claude Desktop

برای استفاده از این سرور با Claude Desktop، این پیکربندی را به فایل `claude_desktop_config.json` خود اضافه کنید:

```json
{
  "mcpServers": {
    "example-stdio-server": {
      "command": "node",
      "args": ["path/to/build/index.js"]
    }
  }
}
```

## ساختار پروژه

```
typescript/
├── src/
│   └── index.ts          # Main server implementation
├── build/                # Compiled JavaScript (generated)
├── package.json          # Project configuration
├── tsconfig.json         # TypeScript configuration
└── README.md            # This file
```

## تفاوت‌های کلیدی با SSE

**حمل‌ونقل stdio (فعلی):**
- ✅ راه‌اندازی ساده‌تر - نیازی به سرور HTTP نیست
- ✅ امنیت بهتر - بدون نقاط پایانی HTTP
- ✅ ارتباط مبتنی بر زیر‌فرآیند
- ✅ JSON-RPC از طریق stdin/stdout
- ✅ عملکرد بهتر

**حمل‌ونقل SSE (منسوخ‌شده):**
- ❌ نیاز به راه‌اندازی سرور Express
- ❌ نیاز به مسیریابی پیچیده و مدیریت جلسه
- ❌ وابستگی‌های بیشتر (Express، مدیریت HTTP)
- ❌ ملاحظات امنیتی اضافی
- ❌ اکنون در MCP 2025-06-18 منسوخ شده است

## نکات توسعه

- برای ثبت لاگ از `console.error()` استفاده کنید (هرگز از `console.log()` استفاده نکنید زیرا به stdout می‌نویسد)
- قبل از آزمایش با `npm run build` پروژه را بسازید
- برای اشکال‌زدایی بصری با Inspector آزمایش کنید
- اطمینان حاصل کنید که تمام پیام‌های JSON به‌درستی قالب‌بندی شده‌اند
- سرور به‌طور خودکار خاموش شدن ایمن را در SIGINT/SIGTERM مدیریت می‌کند

این راه‌حل مطابق با مشخصات فعلی MCP است و بهترین روش‌ها برای پیاده‌سازی حمل‌ونقل stdio با استفاده از TypeScript را نشان می‌دهد.

---

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما تلاش می‌کنیم دقت را حفظ کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌ها باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، توصیه می‌شود از ترجمه حرفه‌ای انسانی استفاده کنید. ما مسئولیتی در قبال سوءتفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.