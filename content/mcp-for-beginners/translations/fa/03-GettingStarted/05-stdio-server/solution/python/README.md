<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "68cd055621b3370948a5a1dff7bedc9a",
  "translation_date": "2025-08-26T20:28:53+00:00",
  "source_file": "03-GettingStarted/05-stdio-server/solution/python/README.md",
  "language_code": "fa"
}
-->
# MCP stdio Server - راه‌حل پایتون

> **⚠️ مهم**: این راه‌حل به‌روزرسانی شده است تا از **انتقال stdio** استفاده کند، همان‌طور که در مشخصات MCP 2025-06-18 توصیه شده است. روش انتقال SSE قدیمی منسوخ شده است.

## مرور کلی

این راه‌حل پایتون نشان می‌دهد که چگونه می‌توان یک سرور MCP با استفاده از انتقال stdio فعلی ساخت. انتقال stdio ساده‌تر، امن‌تر و عملکرد بهتری نسبت به روش SSE قدیمی ارائه می‌دهد.

## پیش‌نیازها

- پایتون نسخه 3.8 یا بالاتر
- توصیه می‌شود برای مدیریت بسته‌ها `uv` را نصب کنید، دستورالعمل‌ها را [اینجا](https://docs.astral.sh/uv/#highlights) ببینید.

## دستورالعمل‌های راه‌اندازی

### مرحله 1: ایجاد یک محیط مجازی

```bash
python -m venv venv
```

### مرحله 2: فعال‌سازی محیط مجازی

**ویندوز:**
```bash
venv\Scripts\activate
```

**macOS/Linux:**
```bash
source venv/bin/activate
```

### مرحله 3: نصب وابستگی‌ها

```bash
pip install mcp
```

## اجرای سرور

سرور stdio به‌طور متفاوتی نسبت به سرور SSE قدیمی اجرا می‌شود. به جای راه‌اندازی یک سرور وب، از طریق stdin/stdout ارتباط برقرار می‌کند:

```bash
python server.py
```

**مهم**: ممکن است سرور به نظر برسد که متوقف شده است - این طبیعی است! سرور منتظر پیام‌های JSON-RPC از stdin است.

## آزمایش سرور

### روش 1: استفاده از MCP Inspector (توصیه‌شده)

```bash
npx @modelcontextprotocol/inspector python server.py
```

این کار موارد زیر را انجام می‌دهد:
1. سرور شما را به‌عنوان یک زیر‌فرآیند اجرا می‌کند
2. یک رابط وب برای آزمایش باز می‌کند
3. به شما امکان می‌دهد تمام ابزارهای سرور را به‌صورت تعاملی آزمایش کنید

### روش 2: آزمایش مستقیم JSON-RPC

همچنین می‌توانید با ارسال پیام‌های JSON-RPC به‌طور مستقیم آزمایش کنید:

1. سرور را اجرا کنید: `python server.py`
2. یک پیام JSON-RPC ارسال کنید (مثال):

```json
{"jsonrpc": "2.0", "id": 1, "method": "tools/list"}
```

3. سرور با ابزارهای موجود پاسخ خواهد داد

### ابزارهای موجود

سرور این ابزارها را ارائه می‌دهد:

- **add(a, b)**: جمع دو عدد
- **multiply(a, b)**: ضرب دو عدد  
- **get_greeting(name)**: ایجاد یک پیام خوش‌آمدگویی شخصی‌سازی‌شده
- **get_server_info()**: دریافت اطلاعات درباره سرور

### آزمایش با Claude Desktop

برای استفاده از این سرور با Claude Desktop، این تنظیمات را به فایل `claude_desktop_config.json` خود اضافه کنید:

```json
{
  "mcpServers": {
    "example-stdio-server": {
      "command": "python",
      "args": ["path/to/server.py"]
    }
  }
}
```

## تفاوت‌های کلیدی با SSE

**انتقال stdio (فعلی):**
- ✅ راه‌اندازی ساده‌تر - نیازی به سرور وب نیست
- ✅ امنیت بهتر - بدون نقاط پایانی HTTP
- ✅ ارتباط مبتنی بر زیر‌فرآیند
- ✅ JSON-RPC از طریق stdin/stdout
- ✅ عملکرد بهتر

**انتقال SSE (منسوخ‌شده):**
- ❌ نیاز به راه‌اندازی سرور HTTP
- ❌ نیاز به چارچوب وب (Starlette/FastAPI)
- ❌ مدیریت پیچیده‌تر مسیرها و جلسات
- ❌ ملاحظات امنیتی اضافی
- ❌ اکنون در MCP 2025-06-18 منسوخ شده است

## نکات اشکال‌زدایی

- از `stderr` برای ثبت لاگ استفاده کنید (هرگز از `stdout` استفاده نکنید)
- برای اشکال‌زدایی بصری با Inspector آزمایش کنید
- مطمئن شوید که تمام پیام‌های JSON با خط جدید جدا شده‌اند
- بررسی کنید که سرور بدون خطا شروع شود

این راه‌حل مطابق با مشخصات فعلی MCP است و بهترین روش‌ها برای پیاده‌سازی انتقال stdio را نشان می‌دهد.

---

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما تلاش می‌کنیم دقت را حفظ کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌ها باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، توصیه می‌شود از ترجمه حرفه‌ای انسانی استفاده کنید. ما مسئولیتی در قبال سوء تفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.