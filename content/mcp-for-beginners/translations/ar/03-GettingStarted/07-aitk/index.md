<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "98bcd044860716da5819e31c152813b7",
  "translation_date": "2025-08-18T13:47:33+00:00",
  "source_file": "03-GettingStarted/07-aitk/README.md",
  "language_code": "ar"
}
-->
# استهلاك خادم من امتداد AI Toolkit لـ Visual Studio Code

عند بناء وكيل ذكاء اصطناعي، الأمر لا يقتصر فقط على توليد ردود ذكية؛ بل يتعلق أيضًا بمنح وكيلك القدرة على اتخاذ الإجراءات. وهنا يأتي دور بروتوكول سياق النموذج (MCP). MCP يجعل من السهل على الوكلاء الوصول إلى الأدوات والخدمات الخارجية بطريقة متسقة. فكر فيه كأنه صندوق أدوات يمكن لوكيلك *فعليًا* استخدامه.

لنفترض أنك قمت بتوصيل وكيلك بخادم MCP للآلة الحاسبة. فجأة، يمكن لوكيلك إجراء العمليات الحسابية بمجرد تلقيه طلبًا مثل "ما حاصل ضرب 47 في 89؟" — دون الحاجة إلى كتابة منطق مخصص أو بناء واجهات برمجية خاصة.

## نظرة عامة

تغطي هذه الدرس كيفية توصيل خادم MCP للآلة الحاسبة بوكيل باستخدام امتداد [AI Toolkit](https://aka.ms/AIToolkit) في Visual Studio Code، مما يمكّن وكيلك من إجراء عمليات حسابية مثل الجمع والطرح والضرب والقسمة باستخدام اللغة الطبيعية.

AI Toolkit هو امتداد قوي لـ Visual Studio Code يبسّط تطوير الوكلاء. يمكن لمهندسي الذكاء الاصطناعي بسهولة بناء تطبيقات ذكاء اصطناعي عن طريق تطوير واختبار نماذج الذكاء الاصطناعي التوليدية — محليًا أو في السحابة. يدعم الامتداد معظم النماذج التوليدية الرئيسية المتوفرة اليوم.

*ملاحظة*: يدعم AI Toolkit حاليًا Python وTypeScript.

## أهداف التعلم

بنهاية هذا الدرس، ستكون قادرًا على:

- استهلاك خادم MCP عبر AI Toolkit.
- تكوين إعدادات الوكيل لتمكينه من اكتشاف واستخدام الأدوات التي يوفرها خادم MCP.
- استخدام أدوات MCP عبر اللغة الطبيعية.

## النهج

إليك كيفية التعامل مع هذا على مستوى عالٍ:

- إنشاء وكيل وتحديد مطالبة النظام الخاصة به.
- إنشاء خادم MCP يحتوي على أدوات الآلة الحاسبة.
- توصيل منشئ الوكيل بخادم MCP.
- اختبار استدعاء الأدوات الخاصة بالوكيل عبر اللغة الطبيعية.

رائع، الآن بعد أن فهمنا التدفق، دعنا نقوم بتكوين وكيل ذكاء اصطناعي للاستفادة من الأدوات الخارجية عبر MCP، مما يعزز قدراته!

## المتطلبات الأساسية

- [Visual Studio Code](https://code.visualstudio.com/)
- [AI Toolkit for Visual Studio Code](https://aka.ms/AIToolkit)

## تمرين: استهلاك خادم

> [!WARNING]
> ملاحظة لمستخدمي macOS. نحن حاليًا نحقق في مشكلة تؤثر على تثبيت التبعيات على macOS. نتيجة لذلك، لن يتمكن مستخدمو macOS من إكمال هذا الدرس في الوقت الحالي. سنقوم بتحديث التعليمات بمجرد توفر الإصلاح. شكرًا لصبركم وتفهمكم!

في هذا التمرين، ستقوم ببناء وتشغيل وتحسين وكيل ذكاء اصطناعي باستخدام أدوات من خادم MCP داخل Visual Studio Code باستخدام AI Toolkit.

### -0- الخطوة التمهيدية، إضافة نموذج OpenAI GPT-4o إلى قائمة النماذج الخاصة بي

يعتمد التمرين على نموذج **GPT-4o**. يجب إضافة النموذج إلى **النماذج الخاصة بي** قبل إنشاء الوكيل.

![لقطة شاشة لواجهة اختيار النماذج في امتداد AI Toolkit لـ Visual Studio Code. العنوان يقول "اعثر على النموذج المناسب لحل الذكاء الاصطناعي الخاص بك" مع عنوان فرعي يشجع المستخدمين على اكتشاف واختبار ونشر نماذج الذكاء الاصطناعي. أدناه، تحت "النماذج الشائعة"، يتم عرض ست بطاقات نماذج: DeepSeek-R1 (مستضاف على GitHub)، OpenAI GPT-4o، OpenAI GPT-4.1، OpenAI o1، Phi 4 Mini (CPU - صغير وسريع)، وDeepSeek-R1 (مستضاف على Ollama). تتضمن كل بطاقة خيارات لإضافة النموذج أو تجربته في الملعب.](../../../../translated_images/aitk-model-catalog.2acd38953bb9c119aa629fe74ef34cc56e4eed35e7f5acba7cd0a59e614ab335.ar.png)

1. افتح امتداد **AI Toolkit** من **شريط النشاط**.
1. في قسم **الفهرس**، اختر **النماذج** لفتح **فهرس النماذج**. يؤدي اختيار **النماذج** إلى فتح **فهرس النماذج** في علامة تبويب جديدة.
1. في شريط البحث الخاص بـ **فهرس النماذج**، أدخل **OpenAI GPT-4o**.
1. انقر على **+ إضافة** لإضافة النموذج إلى قائمة **النماذج الخاصة بي**. تأكد من أنك اخترت النموذج الذي يتم **استضافته على GitHub**.
1. في **شريط النشاط**، تأكد من ظهور نموذج **OpenAI GPT-4o** في القائمة.

### -1- إنشاء وكيل

يتيح لك **منشئ الوكيل (المطالبة)** إنشاء وتخصيص وكلاء مدعومين بالذكاء الاصطناعي. في هذا القسم، ستقوم بإنشاء وكيل جديد وتعيين نموذج لتشغيل المحادثة.

![لقطة شاشة لواجهة "وكيل الآلة الحاسبة" في امتداد AI Toolkit لـ Visual Studio Code. في اللوحة اليسرى، النموذج المختار هو "OpenAI GPT-4o (عبر GitHub)." مطالبة النظام تقول "أنت أستاذ في الجامعة تدرس الرياضيات"، ومطالبة المستخدم تقول، "اشرح لي معادلة فورييه بطريقة بسيطة." تتضمن الخيارات الإضافية أزرارًا لإضافة أدوات، وتمكين خادم MCP، واختيار إخراج منظم. يوجد زر "تشغيل" أزرق في الأسفل. في اللوحة اليمنى، تحت "ابدأ مع الأمثلة"، يتم سرد ثلاثة وكلاء أمثلة: مطور ويب (مع خادم MCP، مبسط للصف الثاني، ومفسر الأحلام، مع أوصاف موجزة لوظائفهم).](../../../../translated_images/aitk-agent-builder.901e3a2960c3e4774b29a23024ff5bec2d4232f57fae2a418b2aaae80f81c05f.ar.png)

1. افتح امتداد **AI Toolkit** من **شريط النشاط**.
1. في قسم **الأدوات**، اختر **منشئ الوكيل (المطالبة)**. يؤدي اختيار **منشئ الوكيل (المطالبة)** إلى فتح **منشئ الوكيل (المطالبة)** في علامة تبويب جديدة.
1. انقر على زر **+ وكيل جديد**. سيطلق الامتداد معالج الإعداد عبر **لوحة الأوامر**.
1. أدخل الاسم **وكيل الآلة الحاسبة** واضغط على **Enter**.
1. في **منشئ الوكيل (المطالبة)**، في حقل **النموذج**، اختر نموذج **OpenAI GPT-4o (عبر GitHub)**.

### -2- إنشاء مطالبة نظام للوكيل

بعد إنشاء هيكل الوكيل، حان الوقت لتحديد شخصيته وغرضه. في هذا القسم، ستستخدم ميزة **إنشاء مطالبة النظام** لوصف السلوك المقصود للوكيل — في هذه الحالة، وكيل آلة حاسبة — وجعل النموذج يكتب مطالبة النظام نيابة عنك.

![لقطة شاشة لواجهة "وكيل الآلة الحاسبة" في AI Toolkit لـ Visual Studio Code مع نافذة منبثقة مفتوحة بعنوان "إنشاء مطالبة." النافذة تشرح أن قالب المطالبة يمكن إنشاؤه بمشاركة تفاصيل أساسية وتتضمن مربع نص يحتوي على مطالبة النظام النموذجية: "أنت مساعد رياضيات مفيد وفعال. عند إعطائك مشكلة تتعلق بالحسابات الأساسية، تستجيب بالنتيجة الصحيحة." أسفل مربع النص توجد أزرار "إغلاق" و"إنشاء". في الخلفية، يظهر جزء من تكوين الوكيل، بما في ذلك النموذج المختار "OpenAI GPT-4o (عبر GitHub)" وحقول لمطالبات النظام والمستخدم.](../../../../translated_images/aitk-generate-prompt.ba9e69d3d2bbe2a26444d0c78775540b14196061eee32c2054e9ee68c4f51f3a.ar.png)

1. في قسم **المطالبات**، انقر على زر **إنشاء مطالبة النظام**. يؤدي هذا الزر إلى فتح منشئ المطالبات الذي يستخدم الذكاء الاصطناعي لإنشاء مطالبة نظام للوكيل.
1. في نافذة **إنشاء مطالبة**، أدخل النص التالي: `أنت مساعد رياضيات مفيد وفعال. عند إعطائك مشكلة تتعلق بالحسابات الأساسية، تستجيب بالنتيجة الصحيحة.`
1. انقر على زر **إنشاء**. ستظهر إشعار في الزاوية اليمنى السفلى يؤكد أن مطالبة النظام قيد الإنشاء. بمجرد اكتمال إنشاء المطالبة، ستظهر المطالبة في حقل **مطالبة النظام** في **منشئ الوكيل (المطالبة)**.
1. راجع **مطالبة النظام** وقم بتعديلها إذا لزم الأمر.

### -3- إنشاء خادم MCP

الآن بعد أن قمت بتحديد مطالبة النظام الخاصة بوكيلك — التي توجه سلوكه واستجاباته — حان الوقت لتزويد الوكيل بقدرات عملية. في هذا القسم، ستقوم بإنشاء خادم MCP للآلة الحاسبة يحتوي على أدوات لتنفيذ عمليات الجمع والطرح والضرب والقسمة. سيمكن هذا الخادم وكيلك من إجراء العمليات الحسابية في الوقت الفعلي استجابةً لطلبات اللغة الطبيعية.

![لقطة شاشة للجزء السفلي من واجهة وكيل الآلة الحاسبة في امتداد AI Toolkit لـ Visual Studio Code. يظهر قوائم قابلة للتوسيع لـ "الأدوات" و"إخراج منظم"، مع قائمة منسدلة بعنوان "اختر تنسيق الإخراج" مضبوطة على "نص." على اليمين، يوجد زر بعنوان "+ خادم MCP" لإضافة خادم بروتوكول سياق النموذج. يظهر رمز صورة نائب أعلى قسم الأدوات.](../../../../translated_images/aitk-add-mcp-server.9742cfddfe808353c0caf9cc0a7ed3e80e13abf4d2ebde315c81c3cb02a2a449.ar.png)

AI Toolkit مزود بقوالب لتسهيل إنشاء خادم MCP الخاص بك. سنستخدم قالب Python لإنشاء خادم MCP للآلة الحاسبة.

*ملاحظة*: يدعم AI Toolkit حاليًا Python وTypeScript.

1. في قسم **الأدوات** من **منشئ الوكيل (المطالبة)**، انقر على زر **+ خادم MCP**. سيطلق الامتداد معالج الإعداد عبر **لوحة الأوامر**.
1. اختر **+ إضافة خادم**.
1. اختر **إنشاء خادم MCP جديد**.
1. اختر **python-weather** كقالب.
1. اختر **المجلد الافتراضي** لحفظ قالب خادم MCP.
1. أدخل الاسم التالي للخادم: **آلة حاسبة**
1. ستفتح نافذة جديدة في Visual Studio Code. اختر **نعم، أثق بالمؤلفين**.
1. باستخدام الطرفية (**Terminal** > **طرفية جديدة**)، أنشئ بيئة افتراضية: `python -m venv .venv`
1. باستخدام الطرفية، قم بتفعيل البيئة الافتراضية:
    1. Windows - `.venv\Scripts\activate`
    1. macOS/Linux - `source .venv/bin/activate`
1. باستخدام الطرفية، قم بتثبيت التبعيات: `pip install -e .[dev]`
1. في عرض **المستكشف** في **شريط النشاط**، قم بتوسيع دليل **src** واختر **server.py** لفتح الملف في المحرر.
1. استبدل الكود في ملف **server.py** بالنص التالي واحفظ:

    ```python
    """
    Sample MCP Calculator Server implementation in Python.

    
    This module demonstrates how to create a simple MCP server with calculator tools
    that can perform basic arithmetic operations (add, subtract, multiply, divide).
    """
    
    from mcp.server.fastmcp import FastMCP
    
    server = FastMCP("calculator")
    
    @server.tool()
    def add(a: float, b: float) -> float:
        """Add two numbers together and return the result."""
        return a + b
    
    @server.tool()
    def subtract(a: float, b: float) -> float:
        """Subtract b from a and return the result."""
        return a - b
    
    @server.tool()
    def multiply(a: float, b: float) -> float:
        """Multiply two numbers together and return the result."""
        return a * b
    
    @server.tool()
    def divide(a: float, b: float) -> float:
        """
        Divide a by b and return the result.
        
        Raises:
            ValueError: If b is zero
        """
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b
    ```

### -4- تشغيل الوكيل مع خادم MCP للآلة الحاسبة

الآن بعد أن أصبح لدى وكيلك أدوات، حان الوقت لاستخدامها! في هذا القسم، ستقدم طلبات إلى الوكيل لاختبار والتحقق مما إذا كان الوكيل يستخدم الأداة المناسبة من خادم MCP للآلة الحاسبة.

![لقطة شاشة لواجهة وكيل الآلة الحاسبة في امتداد AI Toolkit لـ Visual Studio Code. في اللوحة اليسرى، تحت "الأدوات"، تمت إضافة خادم MCP باسم local-server-calculator_server، يظهر أربع أدوات متاحة: الجمع، الطرح، الضرب، والقسمة. تظهر شارة تشير إلى أن أربع أدوات نشطة. أدناه، يوجد قسم "إخراج منظم" مطوي وزر "تشغيل" أزرق. في اللوحة اليمنى، تحت "استجابة النموذج"، يستدعي الوكيل أدوات الضرب والطرح مع المدخلات {"a": 3، "b": 25} و{"a": 75، "b": 20} على التوالي. يتم عرض "استجابة الأداة" النهائية كـ 75.0. يظهر زر "عرض الكود" في الأسفل.](../../../../translated_images/aitk-agent-response-with-tools.e7c781869dc8041a25f9903ed4f7e8e0c7e13d7d94f6786a6c51b1e172f56866.ar.png)

ستقوم بتشغيل خادم MCP للآلة الحاسبة على جهاز التطوير المحلي الخاص بك عبر **منشئ الوكيل** كعميل MCP.

1. اضغط على `F5` لبدء تصحيح خادم MCP. سيفتح **منشئ الوكيل (المطالبة)** في علامة تبويب جديدة. حالة الخادم مرئية في الطرفية.
1. في حقل **مطالبة المستخدم** في **منشئ الوكيل (المطالبة)**، أدخل الطلب التالي: `اشتريت 3 عناصر بسعر 25 دولارًا لكل منها، ثم استخدمت خصمًا بقيمة 20 دولارًا. كم دفعت؟`
1. انقر على زر **تشغيل** لتوليد استجابة الوكيل.
1. راجع إخراج الوكيل. يجب أن يستنتج النموذج أنك دفعت **55 دولارًا**.
1. إليك تفصيل لما يجب أن يحدث:
    - يختار الوكيل أدوات **الضرب** و**الطرح** للمساعدة في الحساب.
    - يتم تعيين القيم `a` و`b` للأداة **الضرب**.
    - يتم تعيين القيم `a` و`b` للأداة **الطرح**.
    - يتم توفير الاستجابة من كل أداة في **استجابة الأداة** الخاصة بها.
    - يتم توفير الإخراج النهائي من النموذج في **استجابة النموذج** النهائية.
1. قدم طلبات إضافية لاختبار الوكيل بشكل أكبر. يمكنك تعديل الطلب الحالي في حقل **مطالبة المستخدم** بالنقر داخل الحقل واستبدال الطلب الحالي.
1. بمجرد الانتهاء من اختبار الوكيل، يمكنك إيقاف الخادم عبر **الطرفية** عن طريق إدخال **CTRL/CMD+C** للإيقاف.

## الواجب

حاول إضافة إدخال أداة إضافية إلى ملف **server.py** الخاص بك (مثل: إرجاع الجذر التربيعي لرقم). قدم طلبات إضافية تتطلب من الوكيل استخدام أداتك الجديدة (أو الأدوات الحالية). تأكد من إعادة تشغيل الخادم لتحميل الأدوات المضافة حديثًا.

## الحل

[الحل](./solution/README.md)

## النقاط الرئيسية

النقاط الرئيسية من هذا الفصل هي كالتالي:

- امتداد AI Toolkit هو عميل رائع يتيح لك استهلاك خوادم MCP وأدواتها.
- يمكنك إضافة أدوات جديدة إلى خوادم MCP، مما يوسع قدرات الوكيل لتلبية المتطلبات المتطورة.
- يتضمن AI Toolkit قوالب (مثل قوالب خادم MCP لـ Python) لتبسيط إنشاء الأدوات المخصصة.

## موارد إضافية

- [وثائق AI Toolkit](https://aka.ms/AIToolkit/doc)

## ما التالي
- التالي: [الاختبار وتصحيح الأخطاء](../08-testing/README.md)

**إخلاء المسؤولية**:  
تمت ترجمة هذا المستند باستخدام خدمة الترجمة الآلية [Co-op Translator](https://github.com/Azure/co-op-translator). بينما نسعى لتحقيق الدقة، يرجى العلم أن الترجمات الآلية قد تحتوي على أخطاء أو معلومات غير دقيقة. يجب اعتبار المستند الأصلي بلغته الأصلية هو المصدر الموثوق. للحصول على معلومات حساسة أو هامة، يُوصى بالاستعانة بترجمة بشرية احترافية. نحن غير مسؤولين عن أي سوء فهم أو تفسيرات خاطئة تنشأ عن استخدام هذه الترجمة.