<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "98bcd044860716da5819e31c152813b7",
  "translation_date": "2025-08-19T17:30:34+00:00",
  "source_file": "03-GettingStarted/07-aitk/README.md",
  "language_code": "sr"
}
-->
# Конзумирање сервера из AI Toolkit екстензије за Visual Studio Code

Када правите AI агента, није само ствар у генерисању паметних одговора; важно је и да вашем агенту омогућите да предузима акције. Ту долази Model Context Protocol (MCP). MCP омогућава агентима да приступе спољашњим алатима и услугама на конзистентан начин. Замислите то као да прикључујете вашег агента на алатке које он *заиста* може да користи.

Рецимо да повежете агента са вашим MCP сервером за калкулатор. Одједном, ваш агент може да извршава математичке операције само на основу упита као што је „Колико је 47 пута 89?“—без потребе за хардкодирањем логике или прављењем прилагођених API-ја.

## Преглед

Ова лекција покрива како да повежете MCP сервер за калкулатор са агентом користећи [AI Toolkit](https://aka.ms/AIToolkit) екстензију у Visual Studio Code-у, омогућавајући вашем агенту да извршава математичке операције као што су сабирање, одузимање, множење и дељење кроз природни језик.

AI Toolkit је моћна екстензија за Visual Studio Code која олакшава развој агената. AI инжењери могу лако да праве AI апликације развијајући и тестирајући генеративне AI моделе—локално или у облаку. Екстензија подржава већину главних генеративних модела доступних данас.

*Напомена*: AI Toolkit тренутно подржава Python и TypeScript.

## Циљеви учења

До краја ове лекције, моћи ћете да:

- Конзумирате MCP сервер преко AI Toolkit-а.
- Конфигуришете агента тако да може да открије и користи алате које MCP сервер пружа.
- Користите MCP алате преко природног језика.

## Приступ

Ево како треба да приступимо овоме на високом нивоу:

- Направите агента и дефинишите његов системски упит.
- Направите MCP сервер са алатима за калкулатор.
- Повежите Agent Builder са MCP сервером.
- Тестирајте позивање алата агента преко природног језика.

Одлично, сада када разумемо ток, хајде да конфигуришемо AI агента да користи спољашње алате преко MCP-а, чиме ћемо побољшати његове могућности!

## Предуслови

- [Visual Studio Code](https://code.visualstudio.com/)
- [AI Toolkit за Visual Studio Code](https://aka.ms/AIToolkit)

## Вежба: Конзумирање сервера

> [!WARNING]
> Напомена за кориснике macOS-а. Тренутно истражујемо проблем који утиче на инсталацију зависности на macOS-у. Као резултат тога, корисници macOS-а неће моћи да заврше овај туторијал у овом тренутку. Ажурираћемо упутства чим решење буде доступно. Хвала вам на стрпљењу и разумевању!

У овој вежби, направићете, покренути и побољшати AI агента са алатима из MCP сервера унутар Visual Studio Code-а користећи AI Toolkit.

### -0- Претходни корак, додајте OpenAI GPT-4o модел у Моји модели

Вежба користи **GPT-4o** модел. Модел треба да буде додат у **Моји модели** пре него што направите агента.

1. Отворите **AI Toolkit** екстензију из **Activity Bar**.
1. У секцији **Catalog**, изаберите **Models** да бисте отворили **Model Catalog**. Избором **Models** отвара се **Model Catalog** у новом табу уређивача.
1. У траци за претрагу **Model Catalog**, унесите **OpenAI GPT-4o**.
1. Кликните **+ Add** да додате модел у вашу листу **Моји модели**. Уверите се да сте изабрали модел који је **Hosted by GitHub**.
1. У **Activity Bar**, потврдите да се **OpenAI GPT-4o** модел појављује на листи.

### -1- Направите агента

**Agent (Prompt) Builder** вам омогућава да направите и прилагодите своје AI агенте. У овом делу, направићете новог агента и доделити му модел за вођење разговора.

1. Отворите **AI Toolkit** екстензију из **Activity Bar**.
1. У секцији **Tools**, изаберите **Agent (Prompt) Builder**. Избором **Agent (Prompt) Builder** отвара се **Agent (Prompt) Builder** у новом табу уређивача.
1. Кликните на дугме **+ New Agent**. Екстензија ће покренути чаробњака за подешавање преко **Command Palette**.
1. Унесите име **Calculator Agent** и притисните **Enter**.
1. У **Agent (Prompt) Builder**, за поље **Model**, изаберите **OpenAI GPT-4o (via GitHub)** модел.

### -2- Направите системски упит за агента

Када је агент постављен, време је да дефинишете његову личност и сврху. У овом делу, користићете функцију **Generate system prompt** да опишете намеравано понашање агента—у овом случају, агента за калкулатор—и дозволите моделу да напише системски упит за вас.

1. За секцију **Prompts**, кликните на дугме **Generate system prompt**. Ово дугме отвара алат за генерисање упита који користи AI за генерисање системског упита за агента.
1. У прозору **Generate a prompt**, унесите следеће: `Ви сте користан и ефикасан математички асистент. Када вам се постави проблем који укључује основну аритметику, одговарате са тачним резултатом.`
1. Кликните на дугме **Generate**. Нотификација ће се појавити у доњем десном углу, потврђујући да се системски упит генерише. Када је генерисање упита завршено, упит ће се појавити у пољу **System prompt** у **Agent (Prompt) Builder**.
1. Прегледајте **System prompt** и модификујте ако је потребно.

### -3- Направите MCP сервер

Сада када сте дефинисали системски упит вашег агента—усмеравајући његово понашање и одговоре—време је да опремите агента практичним могућностима. У овом делу, направићете MCP сервер за калкулатор са алатима за извршавање сабирања, одузимања, множења и дељења. Овај сервер ће омогућити вашем агенту да извршава математичке операције у реалном времену као одговор на упите на природном језику.

AI Toolkit је опремљен шаблонима за лакше креирање сопственог MCP сервера. Користићемо Python шаблон за креирање MCP сервера за калкулатор.

*Напомена*: AI Toolkit тренутно подржава Python и TypeScript.

1. У секцији **Tools** у **Agent (Prompt) Builder**, кликните на дугме **+ MCP Server**. Екстензија ће покренути чаробњака за подешавање преко **Command Palette**.
1. Изаберите **+ Add Server**.
1. Изаберите **Create a New MCP Server**.
1. Изаберите **python-weather** као шаблон.
1. Изаберите **Default folder** за чување MCP сервер шаблона.
1. Унесите следеће име за сервер: **Calculator**
1. Нови Visual Studio Code прозор ће се отворити. Изаберите **Yes, I trust the authors**.
1. Користећи терминал (**Terminal** > **New Terminal**), направите виртуелно окружење: `python -m venv .venv`
1. Користећи терминал, активирајте виртуелно окружење:
    1. Windows - `.venv\Scripts\activate`
    1. macOS/Linux - `source .venv/bin/activate`
1. Користећи терминал, инсталирајте зависности: `pip install -e .[dev]`
1. У **Explorer** приказу **Activity Bar**, проширите директоријум **src** и изаберите **server.py** да бисте отворили датотеку у уређивачу.
1. Замените код у датотеци **server.py** са следећим и сачувајте:

    ```python
    """
    Sample MCP Calculator Server implementation in Python.

    
    This module demonstrates how to create a simple MCP server with calculator tools
    that can perform basic arithmetic operations (add, subtract, multiply, divide).
    """
    
    from mcp.server.fastmcp import FastMCP
    
    server = FastMCP("calculator")
    
    @server.tool()
    def add(a: float, b: float) -> float:
        """Add two numbers together and return the result."""
        return a + b
    
    @server.tool()
    def subtract(a: float, b: float) -> float:
        """Subtract b from a and return the result."""
        return a - b
    
    @server.tool()
    def multiply(a: float, b: float) -> float:
        """Multiply two numbers together and return the result."""
        return a * b
    
    @server.tool()
    def divide(a: float, b: float) -> float:
        """
        Divide a by b and return the result.
        
        Raises:
            ValueError: If b is zero
        """
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b
    ```

### -4- Покрените агента са MCP сервером за калкулатор

Сада када ваш агент има алате, време је да их користи! У овом делу, поставићете упите агенту да тестирате и проверите да ли агент користи одговарајући алат из MCP сервера за калкулатор.

1. Притисните `F5` да започнете дебаговање MCP сервера. **Agent (Prompt) Builder** ће се отворити у новом табу уређивача. Статус сервера је видљив у терминалу.
1. У пољу **User prompt** у **Agent (Prompt) Builder**, унесите следећи упит: `Купио сам 3 артикла по цени од $25 сваки, а затим искористио попуст од $20. Колико сам платио?`
1. Кликните на дугме **Run** да генеришете одговор агента.
1. Прегледајте излаз агента. Модел би требало да закључи да сте платили **$55**.
1. Ево шта би требало да се догоди:
    - Агент бира алате **multiply** и **subtract** да помогне у израчунавању.
    - Одговарајуће вредности `a` и `b` се додељују за алат **multiply**.
    - Одговарајуће вредности `a` и `b` се додељују за алат **subtract**.
    - Одговор од сваког алата се пружа у одговарајућем **Tool Response**.
    - Коначни излаз модела се пружа у коначном **Model Response**.
1. Поставите додатне упите да даље тестирате агента. Можете модификовати постојећи упит у пољу **User prompt** кликом у поље и заменом постојећег упита.
1. Када завршите са тестирањем агента, можете зауставити сервер преко **терминала** уношењем **CTRL/CMD+C** за излаз.

## Задатак

Покушајте да додате додатни алат у вашу датотеку **server.py** (нпр. враћање квадратног корена броја). Поставите додатне упите који би захтевали од агента да користи ваш нови алат (или постојеће алате). Обавезно поново покрените сервер да бисте учитали ново додате алате.

## Решење

[Решење](./solution/README.md)

## Кључни закључци

Закључци из овог поглавља су следећи:

- AI Toolkit екстензија је одличан клијент који вам омогућава да конзумирате MCP сервере и њихове алате.
- Можете додати нове алате MCP серверима, проширујући могућности агента да задовољи развојне захтеве.
- AI Toolkit укључује шаблоне (нпр. Python MCP сервер шаблоне) за поједностављење креирања прилагођених алата.

## Додатни ресурси

- [AI Toolkit документација](https://aka.ms/AIToolkit/doc)

## Шта следи
- Следеће: [Тестирање и дебаговање](../08-testing/README.md)

**Одрицање од одговорности**:  
Овај документ је преведен коришћењем услуге за превођење помоћу вештачке интелигенције [Co-op Translator](https://github.com/Azure/co-op-translator). Иако се трудимо да обезбедимо тачност, молимо вас да имате у виду да аутоматски преводи могу садржати грешке или нетачности. Оригинални документ на изворном језику треба сматрати меродавним извором. За критичне информације препоручује се професионални превод од стране људи. Не преузимамо одговорност за било каква погрешна тумачења или неспоразуме који могу настати услед коришћења овог превода.