<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "4d3415b9d2bf58bc69be07f945a69e07",
  "translation_date": "2025-07-14T05:56:40+00:00",
  "source_file": "09-CaseStudy/travelagentsample.md",
  "language_code": "ja"
}
-->
# ケーススタディ：Azure AI トラベルエージェント – 参照実装

## 概要

[Azure AI Travel Agents](https://github.com/Azure-Samples/azure-ai-travel-agents) は、Microsoft が開発した包括的な参照ソリューションで、Model Context Protocol (MCP)、Azure OpenAI、Azure AI Search を活用してマルチエージェントのAI搭載旅行プランニングアプリケーションを構築する方法を示しています。本プロジェクトは、複数のAIエージェントのオーケストレーション、企業データの統合、そして実際のシナリオに対応した安全で拡張可能なプラットフォームの提供におけるベストプラクティスを紹介しています。

## 主な特徴
- **マルチエージェントのオーケストレーション：** MCPを利用して、フライト、ホテル、旅程などの専門エージェントが連携し、複雑な旅行プランニングタスクを遂行します。
- **企業データの統合：** Azure AI Searchやその他の企業データソースに接続し、最新かつ関連性の高い旅行情報を提供します。
- **安全でスケーラブルなアーキテクチャ：** Azureサービスを活用し、認証・認可やスケーラブルな展開を実現し、企業のセキュリティベストプラクティスに準拠しています。
- **拡張可能なツール群：** 再利用可能なMCPツールやプロンプトテンプレートを実装し、新しいドメインやビジネス要件への迅速な適応を可能にします。
- **ユーザー体験：** Azure OpenAIとMCPによって駆動される対話型インターフェースを提供し、ユーザーが旅行エージェントと自然にやり取りできます。

## アーキテクチャ
![Architecture](https://raw.githubusercontent.com/Azure-Samples/azure-ai-travel-agents/main/docs/ai-travel-agents-architecture-diagram.png)

### アーキテクチャ図の説明

Azure AI Travel Agents ソリューションは、複数のAIエージェントと企業データソースをモジュール化、スケーラブルかつ安全に統合するよう設計されています。主なコンポーネントとデータフローは以下の通りです：

- **ユーザーインターフェース：** ユーザーは対話型UI（ウェブチャットやTeamsボットなど）を通じてシステムとやり取りし、問い合わせや旅行の提案を受け取ります。
- **MCPサーバー：** 中央のオーケストレーターとして機能し、ユーザー入力を受け取り、コンテキストを管理し、Model Context Protocolを介して専門エージェント（FlightAgent、HotelAgent、ItineraryAgentなど）の動作を調整します。
- **AIエージェント：** 各エージェントは特定のドメイン（フライト、ホテル、旅程）を担当し、MCPツールとして実装されています。プロンプトテンプレートとロジックを用いてリクエストを処理し、応答を生成します。
- **Azure OpenAI サービス：** 高度な自然言語理解と生成を提供し、エージェントがユーザーの意図を解釈し、対話的な応答を生成できるようにします。
- **Azure AI Search & 企業データ：** エージェントはAzure AI Searchやその他の企業データソースを検索し、最新のフライト、ホテル、旅行オプション情報を取得します。
- **認証とセキュリティ：** Microsoft Entra IDと連携し、安全な認証を実現し、すべてのリソースに最小権限アクセス制御を適用します。
- **デプロイメント：** Azure Container Apps上での展開を想定し、スケーラビリティ、監視、運用効率を確保しています。

このアーキテクチャにより、複数のAIエージェントのシームレスなオーケストレーション、企業データとの安全な統合、そしてドメイン固有のAIソリューション構築に適した堅牢で拡張可能なプラットフォームが実現されます。

## アーキテクチャ図のステップごとの説明
大きな旅行を計画するときに、専門家のチームが細部までサポートしてくれる様子を想像してください。Azure AI Travel Agents システムも同様に、各パーツ（チームメンバーのようなもの）がそれぞれ特別な役割を持って動いています。以下がその仕組みです：

### ユーザーインターフェース（UI）：
これは旅行代理店の受付のようなものです。ユーザーはここで「パリ行きのフライトを探して」といった質問やリクエストをします。ウェブサイトのチャットウィンドウやメッセージングアプリが該当します。

### MCPサーバー（コーディネーター）：
MCPサーバーは受付のマネージャーのような役割で、あなたのリクエストを聞き、どの専門家が対応すべきかを判断します。会話の流れを管理し、スムーズな進行を保証します。

### AIエージェント（専門アシスタント）：
各エージェントは特定分野の専門家です。フライトに詳しいエージェント、ホテルに詳しいエージェント、旅程作成のエージェントなどがいます。MCPサーバーはあなたのリクエストを適切なエージェントに送信し、彼らは知識とツールを使って最適な提案を探します。

### Azure OpenAI サービス（言語の専門家）：
どんな言い回しでもあなたの意図を正確に理解できる言語の専門家のような存在です。エージェントがリクエストを理解し、自然で対話的な応答を生成するのを助けます。

### Azure AI Search & 企業データ（情報ライブラリ）：
最新の旅行情報が詰まった巨大な図書館のようなものです。フライトのスケジュールやホテルの空き状況など、正確な情報を得るためにエージェントがここを検索します。

### 認証とセキュリティ（警備員）：
特定のエリアに入れる人をチェックする警備員のように、許可されたユーザーやエージェントだけが機密情報にアクセスできるようにします。データの安全とプライバシーを守ります。

### Azure Container Apps 上のデプロイメント（建物）：
これらのアシスタントやツールは、安全でスケーラブルな建物（クラウド）内で連携しています。多くのユーザーが同時に利用しても対応でき、いつでも利用可能な状態を保ちます。

## 全体の流れ：

1. 受付（UI）で質問をします。
2. マネージャー（MCPサーバー）がどの専門家（エージェント）が対応するか決めます。
3. 専門家は言語の専門家（OpenAI）を使ってリクエストを理解し、情報ライブラリ（AI Search）で最適な答えを探します。
4. 警備員（認証）がすべての安全を確保します。
5. これらすべてが信頼性が高くスケーラブルな建物（Azure Container Apps）内で行われるため、快適で安全な体験が提供されます。

このチームワークにより、まるで専門の旅行代理店チームが最新のオフィスで協力しているかのように、迅速かつ安全に旅行計画をサポートします。

## 技術的な実装
- **MCPサーバー：** コアのオーケストレーションロジックをホストし、エージェントツールを公開し、複数ステップの旅行プランニングワークフローのコンテキストを管理します。
- **エージェント：** 各エージェント（例：FlightAgent、HotelAgent）は独自のプロンプトテンプレートとロジックを持つMCPツールとして実装されています。
- **Azure連携：** 自然言語理解にAzure OpenAIを、データ取得にAzure AI Searchを使用します。
- **セキュリティ：** Microsoft Entra IDと統合し、すべてのリソースに最小権限アクセス制御を適用します。
- **デプロイメント：** スケーラビリティと運用効率のためにAzure Container Appsへの展開をサポートします。

## 結果と影響
- MCPを活用して複数のAIエージェントを実際の本番環境レベルでオーケストレーションする方法を実証。
- エージェントの調整、データ統合、安全な展開のための再利用可能なパターンを提供し、ソリューション開発を加速。
- MCPとAzureサービスを用いたドメイン固有のAI搭載アプリケーション構築の設計図として機能。

## 参考資料
- [Azure AI Travel Agents GitHub リポジトリ](https://github.com/Azure-Samples/azure-ai-travel-agents)
- [Azure OpenAI Service](https://azure.microsoft.com/en-us/products/ai-services/openai-service/)
- [Azure AI Search](https://azure.microsoft.com/en-us/products/ai-services/ai-search/)
- [Model Context Protocol (MCP)](https://modelcontextprotocol.io/)

**免責事項**：  
本書類はAI翻訳サービス「[Co-op Translator](https://github.com/Azure/co-op-translator)」を使用して翻訳されました。正確性の向上に努めておりますが、自動翻訳には誤りや不正確な部分が含まれる可能性があります。原文の言語によるオリジナル文書が正式な情報源とみなされるべきです。重要な情報については、専門の人間による翻訳を推奨します。本翻訳の利用により生じたいかなる誤解や誤訳についても、当方は一切の責任を負いかねます。