<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1b6c746d9e190deba4d8765267ffb94e",
  "translation_date": "2025-07-16T23:14:42+00:00",
  "source_file": "02-Security/azure-content-safety-implementation.md",
  "language_code": "ja"
}
-->
# MCPでのAzure Content Safetyの実装

MCPのセキュリティをプロンプトインジェクション、ツールポイズニング、その他AI特有の脆弱性から強化するために、Azure Content Safetyの統合が強く推奨されます。

## MCPサーバーとの統合

Azure Content SafetyをMCPサーバーに統合するには、リクエスト処理パイプラインにコンテンツセーフティフィルターをミドルウェアとして追加します：

1. サーバー起動時にフィルターを初期化する
2. 処理前にすべての受信ツールリクエストを検証する
3. クライアントに返す前にすべての送信レスポンスをチェックする
4. セーフティ違反をログに記録し、アラートを発する
5. コンテンツセーフティチェックが失敗した場合の適切なエラーハンドリングを実装する

これにより、以下の攻撃に対して強固な防御が可能になります：
- プロンプトインジェクション攻撃
- ツールポイズニングの試み
- 悪意ある入力によるデータの持ち出し
- 有害コンテンツの生成

## Azure Content Safety統合のベストプラクティス

1. **カスタムブロックリスト**：MCPのインジェクションパターンに特化したカスタムブロックリストを作成する
2. **重大度の調整**：特定のユースケースやリスク許容度に応じて重大度の閾値を調整する
3. **包括的なカバレッジ**：すべての入力と出力に対してコンテンツセーフティチェックを適用する
4. **パフォーマンス最適化**：繰り返し行われるコンテンツセーフティチェックに対してキャッシュの実装を検討する
5. **フォールバック機構**：コンテンツセーフティサービスが利用できない場合の明確なフォールバック動作を定義する
6. **ユーザーフィードバック**：安全上の理由でコンテンツがブロックされた際にユーザーに明確なフィードバックを提供する
7. **継続的な改善**：新たな脅威に基づきブロックリストやパターンを定期的に更新する

**免責事項**：  
本書類はAI翻訳サービス「[Co-op Translator](https://github.com/Azure/co-op-translator)」を使用して翻訳されました。正確性の向上に努めておりますが、自動翻訳には誤りや不正確な部分が含まれる可能性があります。原文の言語による文書が正式な情報源とみなされるべきです。重要な情報については、専門の人間による翻訳を推奨します。本翻訳の利用により生じたいかなる誤解や誤訳についても、当方は責任を負いかねます。