<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b2b9e15e78b9d9a2b3ff3e8fd7d1f434",
  "translation_date": "2025-08-18T16:53:17+00:00",
  "source_file": "02-Security/mcp-best-practices.md",
  "language_code": "he"
}
-->
# עקרונות אבטחה מומלצים ל-MCP לשנת 2025

מדריך מקיף זה מציג עקרונות אבטחה חיוניים ליישום מערכות Model Context Protocol (MCP) בהתבסס על **MCP Specification 2025-06-18** והסטנדרטים העדכניים בתעשייה. עקרונות אלו מתייחסים הן לאיומי אבטחה מסורתיים והן לאיומים ייחודיים הקשורים ל-AI בפריסות MCP.

## דרישות אבטחה קריטיות

### בקרות אבטחה חובה (דרישות MUST)

1. **אימות אסימונים**: שרתי MCP **חייבים שלא** לקבל אסימונים שלא הונפקו במפורש עבור השרת עצמו.
2. **אימות הרשאות**: שרתי MCP המיישמים הרשאות **חייבים** לאמת את כל הבקשות הנכנסות ו**חייבים שלא** להשתמש במפגשים לצורך אימות.
3. **הסכמת משתמש**: שרתי פרוקסי של MCP המשתמשים במזהי לקוח סטטיים **חייבים** לקבל הסכמה מפורשת מהמשתמש עבור כל לקוח שנרשם באופן דינמי.
4. **מזהי מפגש מאובטחים**: שרתי MCP **חייבים** להשתמש במזהי מפגש קריפטוגרפיים, לא דטרמיניסטיים, שנוצרו באמצעות מחוללי מספרים אקראיים מאובטחים.

## עקרונות אבטחה מרכזיים

### 1. אימות וניקוי קלטים
- **אימות קלט מקיף**: יש לאמת ולנקות את כל הקלטים כדי למנוע התקפות הזרקה, בעיות "סגן מבולבל" ופגיעויות הזרקת הנחיות.
- **אכיפת סכמות פרמטרים**: יש ליישם אימות סכמות JSON קפדני עבור כל פרמטרי הכלים וקלטי ה-API.
- **סינון תוכן**: השתמשו ב-Microsoft Prompt Shields וב-Azure Content Safety לסינון תוכן זדוני בהנחיות ובתגובות.
- **ניקוי פלטים**: יש לאמת ולנקות את כל פלטי המודלים לפני הצגתם למשתמשים או למערכות המשך.

### 2. מצוינות באימות והרשאות
- **ספקי זהות חיצוניים**: האצילו את תהליך האימות לספקי זהות מבוססים (Microsoft Entra ID, ספקי OAuth 2.1) במקום ליישם אימות מותאם אישית.
- **הרשאות מדויקות**: יישמו הרשאות מדויקות וממוקדות כלים בהתאם לעקרון המינימום הנדרש.
- **ניהול מחזור חיים של אסימונים**: השתמשו באסימוני גישה קצרי טווח עם רוטציה מאובטחת ואימות קהל מתאים.
- **אימות רב-גורמי**: דרשו MFA עבור כל גישה ניהולית ופעולות רגישות.

### 3. פרוטוקולי תקשורת מאובטחים
- **אבטחת שכבת תעבורה**: השתמשו ב-HTTPS/TLS 1.3 לכל תקשורת MCP עם אימות תעודות מתאים.
- **הצפנה מקצה לקצה**: יישמו שכבות הצפנה נוספות עבור נתונים רגישים במיוחד במעבר ובמנוחה.
- **ניהול תעודות**: תחזקו ניהול מחזור חיים של תעודות עם תהליכי חידוש אוטומטיים.
- **אכיפת גרסת פרוטוקול**: השתמשו בגרסת הפרוטוקול הנוכחית של MCP (2025-06-18) עם ניהול גרסאות מתאים.

### 4. הגבלת קצב מתקדמת והגנה על משאבים
- **הגבלת קצב רב-שכבתית**: יישמו הגבלת קצב ברמת המשתמש, המפגש, הכלי והמשאב כדי למנוע ניצול לרעה.
- **הגבלת קצב אדפטיבית**: השתמשו בהגבלת קצב מבוססת למידת מכונה המותאמת לדפוסי שימוש ואינדיקטורים לאיומים.
- **ניהול מכסות משאבים**: הגדירו מגבלות מתאימות למשאבי חישוב, שימוש בזיכרון וזמן ביצוע.
- **הגנה מפני DDoS**: פרסו מערכות הגנה מקיפות מפני DDoS וניתוח תעבורה.

### 5. רישום וניטור מקיפים
- **רישום ביקורת מובנה**: יישמו יומנים מפורטים הניתנים לחיפוש עבור כל פעולות MCP, ביצועי כלים ואירועי אבטחה.
- **ניטור אבטחה בזמן אמת**: פרסו מערכות SIEM עם זיהוי אנומליות מבוסס AI עבור עומסי עבודה של MCP.
- **רישום תואם פרטיות**: רשמו אירועי אבטחה תוך שמירה על דרישות פרטיות ורגולציות.
- **שילוב תגובה לאירועים**: חברו מערכות רישום לזרימות עבודה אוטומטיות של תגובה לאירועים.

### 6. שיטות אחסון מאובטחות משופרות
- **מודולי אבטחת חומרה**: השתמשו באחסון מפתחות מבוסס HSM (Azure Key Vault, AWS CloudHSM) עבור פעולות קריפטוגרפיות קריטיות.
- **ניהול מפתחות הצפנה**: יישמו רוטציה, הפרדה ובקרות גישה מתאימות למפתחות הצפנה.
- **ניהול סודות**: אחסנו את כל מפתחות ה-API, האסימונים והאישורים במערכות ייעודיות לניהול סודות.
- **סיווג נתונים**: סווגו נתונים לפי רמות רגישות ויישמו אמצעי הגנה מתאימים.

### 7. ניהול אסימונים מתקדם
- **מניעת העברת אסימונים**: אסרו במפורש דפוסי העברת אסימונים שעוקפים בקרות אבטחה.
- **אימות קהל**: תמיד ודאו שתביעות הקהל של האסימונים תואמות לזהות שרת ה-MCP המיועד.
- **הרשאות מבוססות תביעות**: יישמו הרשאות מדויקות המבוססות על תביעות אסימונים ותכונות משתמש.
- **קשירת אסימונים**: קשרו אסימונים למפגשים, משתמשים או מכשירים ספציפיים במידת הצורך.

### 8. ניהול מפגשים מאובטח
- **מזהי מפגש קריפטוגרפיים**: צרו מזהי מפגש באמצעות מחוללי מספרים אקראיים מאובטחים (לא רצפים צפויים).
- **קשירה למשתמש**: קשרו מזהי מפגש למידע ייחודי למשתמש בפורמטים מאובטחים כמו `<user_id>:<session_id>`.
- **בקרות מחזור חיים של מפגשים**: יישמו מנגנוני פקיעה, רוטציה וביטול מתאימים למפגשים.
- **כותרות אבטחת מפגשים**: השתמשו בכותרות HTTP מתאימות להגנה על מפגשים.

### 9. בקרות אבטחה ייחודיות ל-AI
- **הגנה מפני הזרקת הנחיות**: פרסו Microsoft Prompt Shields עם טכניקות כמו הדגשה, מפרידים וסימוני נתונים.
- **מניעת הרעלת כלים**: אימתו מטא-נתונים של כלים, עקבו אחר שינויים דינמיים ואמתו את שלמות הכלים.
- **אימות פלטי מודלים**: סרקו פלטי מודלים לאיתור דליפות נתונים פוטנציאליות, תוכן מזיק או הפרות מדיניות אבטחה.
- **הגנה על חלון הקשר**: יישמו בקרות למניעת הרעלת חלון הקשר והתקפות מניפולציה.

### 10. אבטחת ביצוע כלים
- **בידוד ביצוע**: הריצו ביצועי כלים בסביבות מבודדות ומכולות עם מגבלות משאבים.
- **הפרדת הרשאות**: הריצו כלים עם ההרשאות המינימליות הנדרשות וחשבונות שירות נפרדים.
- **בידוד רשת**: יישמו הפרדת רשת עבור סביבות ביצוע כלים.
- **ניטור ביצוע**: עקבו אחר ביצועי כלים לאיתור התנהגות חריגה, שימוש במשאבים והפרות אבטחה.

### 11. אימות אבטחה מתמשך
- **בדיקות אבטחה אוטומטיות**: שלבו בדיקות אבטחה בצינורות CI/CD עם כלים כמו GitHub Advanced Security.
- **ניהול פגיעויות**: סרקו באופן קבוע את כל התלויות, כולל מודלים של AI ושירותים חיצוניים.
- **בדיקות חדירה**: בצעו הערכות אבטחה תקופתיות הממוקדות במיוחד ביישומי MCP.
- **סקירות קוד אבטחה**: יישמו סקירות אבטחה חובה לכל שינויי קוד הקשורים ל-MCP.

### 12. אבטחת שרשרת אספקה ל-AI
- **אימות רכיבים**: אימתו את המקור, השלמות והאבטחה של כל רכיבי ה-AI (מודלים, הטמעות, APIs).
- **ניהול תלויות**: תחזקו רשימות עדכניות של כל התוכנות ותלויות ה-AI עם מעקב אחר פגיעויות.
- **מאגרי מידע מהימנים**: השתמשו במקורות מאומתים ומהימנים לכל מודלי ה-AI, הספריות והכלים.
- **ניטור שרשרת אספקה**: עקבו באופן מתמשך אחר פשרות אצל ספקי שירותי AI ומאגרי מודלים.

## דפוסי אבטחה מתקדמים

### ארכיטקטורת Zero Trust עבור MCP
- **לעולם אל תסמוך, תמיד אמת**: יישמו אימות מתמשך לכל משתתפי MCP.
- **מיקרו-סגמנטציה**: בידדו רכיבי MCP עם בקרות רשת וזהות מדויקות.
- **גישה מותנית**: יישמו בקרות גישה מבוססות סיכון המותאמות להקשר ולהתנהגות.
- **הערכת סיכון מתמשכת**: העריכו באופן דינמי את מצב האבטחה בהתבסס על אינדיקטורים לאיומים.

### יישום AI שומר פרטיות
- **מזעור נתונים**: חשפו רק את המידע המינימלי הנדרש לכל פעולה של MCP.
- **פרטיות דיפרנציאלית**: יישמו טכניקות שימור פרטיות לעיבוד נתונים רגישים.
- **הצפנה הומומורפית**: השתמשו בטכניקות הצפנה מתקדמות לחישוב מאובטח על נתונים מוצפנים.
- **למידה מבוזרת**: יישמו גישות למידה מבוזרות השומרות על מקומיות ופרטיות הנתונים.

### תגובה לאירועים במערכות AI
- **נהלים ייחודיים לאירועי AI**: פתחו נהלי תגובה לאירועים המותאמים לאיומים ייחודיים ל-AI ול-MCP.
- **תגובה אוטומטית**: יישמו הכלה ותיקון אוטומטיים לאירועי אבטחה נפוצים ב-AI.
- **יכולות פורנזיות**: תחזקו מוכנות פורנזית לפשרות במערכות AI ודליפות נתונים.
- **נהלי התאוששות**: הגדירו נהלים להתאוששות מהרעלת מודלים, התקפות הזרקת הנחיות ופגיעות בשירותים.

## משאבי יישום וסטנדרטים

### תיעוד רשמי של MCP
- [MCP Specification 2025-06-18](https://spec.modelcontextprotocol.io/specification/2025-06-18/) - מפרט הפרוטוקול הנוכחי של MCP  
- [MCP Security Best Practices](https://modelcontextprotocol.io/specification/2025-06-18/basic/security_best_practices) - הנחיות אבטחה רשמיות  
- [MCP Authorization Specification](https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization) - דפוסי אימות והרשאות  
- [MCP Transport Security](https://modelcontextprotocol.io/specification/2025-06-18/transports/) - דרישות אבטחת שכבת תעבורה  

### פתרונות אבטחה של Microsoft
- [Microsoft Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection) - הגנה מתקדמת מפני הזרקת הנחיות  
- [Azure Content Safety](https://learn.microsoft.com/azure/ai-services/content-safety/) - סינון תוכן AI מקיף  
- [Microsoft Entra ID](https://learn.microsoft.com/entra/identity-platform/v2-oauth2-auth-code-flow) - ניהול זהות וגישה ארגוני  
- [Azure Key Vault](https://learn.microsoft.com/azure/key-vault/general/basic-concepts) - ניהול מאובטח של סודות ואישורים  
- [GitHub Advanced Security](https://github.com/security/advanced-security) - סריקת אבטחת קוד ושרשרת אספקה  

### סטנדרטים ומסגרות אבטחה
- [OAuth 2.1 Security Best Practices](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-security-topics) - הנחיות אבטחה עדכניות ל-OAuth  
- [OWASP Top 10](https://owasp.org/www-project-top-ten/) - סיכוני אבטחת יישומי אינטרנט  
- [OWASP Top 10 for LLMs](https://genai.owasp.org/download/43299/?tmstv=1731900559) - סיכוני אבטחה ייחודיים ל-AI  
- [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework) - ניהול סיכוני AI מקיף  
- [ISO 27001:2022](https://www.iso.org/standard/27001) - מערכות ניהול אבטחת מידע  

### מדריכי יישום והדרכות
- [Azure API Management as MCP Auth Gateway](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690) - דפוסי אימות ארגוניים  
- [Microsoft Entra ID with MCP Servers](https://den.dev/blog/mcp-server-auth-entra-id-session/) - אינטגרציה עם ספקי זהות  
- [Secure Token Storage Implementation](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2) - עקרונות ניהול אסימונים  
- [End-to-End Encryption for AI](https://learn.microsoft.com/azure/architecture/example-scenario/confidential/end-to-end-encryption) - דפוסי הצפנה מתקדמים  

### משאבי אבטחה מתקדמים
- [Microsoft Security Development Lifecycle](https://www.microsoft.com/sdl) - עקרונות פיתוח מאובטח  
- [AI Red Team Guidance](https://learn.microsoft.com/security/ai-red-team/) - בדיקות אבטחה ייחודיות ל-AI  
- [Threat Modeling for AI Systems](https://learn.microsoft.com/security/adoption/approach/threats-ai) - מתודולוגיית ניתוח איומים ל-AI  
- [Privacy Engineering for AI](https://www.microsoft.com/security/blog/2021/07/13/microsofts-pet-project-privacy-enhancing-technologies-in-action/) - טכניקות AI לשמירה על פרטיות  

### תאימות וממשל
- [GDPR Compliance for AI](https://learn.microsoft.com/compliance/regulatory/gdpr-data-protection-impact-assessments) - תאימות פרטיות במערכות AI  
- [AI Governance Framework](https://learn.microsoft.com/azure/architecture/guide/responsible-ai/responsible-ai-overview) - יישום AI אחראי  
- [SOC 2 for AI Services](https://learn.microsoft.com/compliance/regulatory/offering-soc) - בקרות אבטחה לספקי שירותי AI  
- [HIPAA Compliance for AI](https://learn.microsoft.com/compliance/regulatory/offering-hipaa-hitech) - דרישות תאימות AI בתחום הבריאות  

### DevSecOps ואוטומציה
- [DevSecOps Pipeline for AI](https://learn.microsoft.com/azure/devops/migrate/security-validation-cicd-pipeline) - צינורות פיתוח מאובטחים ל-AI  
- [Automated Security Testing](https://learn.microsoft.com/security/engineering/devsecops) - אימות אבטחה מתמשך  
- [Infrastructure as Code Security](https://learn.microsoft.com/security/engineering/infrastructure-security) - פריסת תשתית מאובטחת  
- [Container Security for AI](https://learn.microsoft.com/azure/container-instances/container-instances-image-security) - אבטחת מכולות לעומסי עבודה של AI  

### ניטור ותגובה לאירועים  
- [Azure Monitor for AI Workloads](https://learn.microsoft.com/azure/azure-monitor/overview) - פתרונות ניטור מקיפים  
- [AI Security Incident Response](https://learn.microsoft.com/security/compass/incident-response-playbooks) - נהלים ייחודיים לאירועי אבטחת AI  
- [SIEM for AI Systems](https://learn.microsoft.com/azure/sentinel/overview) - ניהול מידע ואירועי אבטחה  
- [Threat Intelligence for AI](https://learn.microsoft.com/security/compass/security-
- **פיתוח כלים**: פיתוח ושיתוף כלים וספריות אבטחה עבור מערכת MCP

---

*מסמך זה משקף את שיטות האבטחה הטובות ביותר של MCP נכון ל-18 באוגוסט 2025, בהתבסס על מפרט MCP 2025-06-18. יש לבחון ולעדכן באופן קבוע את שיטות האבטחה בהתאם להתפתחות הפרוטוקול ונוף האיומים.*

**כתב ויתור**:  
מסמך זה תורגם באמצעות שירות תרגום מבוסס בינה מלאכותית [Co-op Translator](https://github.com/Azure/co-op-translator). בעוד שאנו שואפים לדיוק, יש להיות מודעים לכך שתרגומים אוטומטיים עשויים להכיל שגיאות או אי דיוקים. המסמך המקורי בשפתו המקורית צריך להיחשב כמקור סמכותי. עבור מידע קריטי, מומלץ להשתמש בתרגום מקצועי על ידי אדם. איננו נושאים באחריות לאי הבנות או לפרשנויות שגויות הנובעות משימוש בתרגום זה.