# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Task Tracking (Beads / bd)

Use `bd` for ALL tasks/issues:
- Start: `bd ready` to see available work
- Claim: `bd update <id> --status in_progress`
- Create: `bd create "Title" -p 1 --description "Context"`
- Close: `bd close <id> --reason "Done"`
- Sync: `bd sync` at end of session

After upgrading bd: `bd info --whats-new` and `bd hooks install` if warned.

## Project Overview

Hugo static blog at https://startaitools.com documenting AI development, data engineering, and DevOps. Auto-deploys to Netlify on push to **master** (not main).

## Commands

```bash
# Development
hugo server -D              # Local server with drafts
hugo server                 # Production preview

# Build (matches Netlify)
hugo --gc --minify --cleanDestinationDir

# New content
hugo new posts/my-post.md

# Link validation (after build)
./verify_links.sh

# Theme setup (if themes/ is empty after clone)
git submodule update --init --recursive
```

## Git Branching

- **Deploy branch**: `master` (Netlify watches this, NOT main)
- **Main branch**: `main` exists but `master` is the active deploy target
- Push to `master` triggers auto-deploy

## Front Matter

**Both TOML and YAML exist. Prefer TOML for new posts:**

```toml
+++
title = 'Post Title'
date = 2025-01-26T10:00:00-06:00
draft = false
tags = ["ai", "deployment"]
categories = ["Technical Deep-Dive"]
description = "SEO description"
+++
```

Legacy posts use YAML (`---`). Both work.

**Optional front matter params** (supported by `layouts/_default/single.html`):
- `toc = true` — renders a table of contents sidebar
- `tldr = "Summary text"` — renders a tl;dr box above the body

## Architecture

```
content/
├── posts/                    # Blog posts (64+)
├── _index.md                 # Homepage content
├── about.md, contact.md      # Static pages
├── projects.md, research.md  # Section pages
├── agentic-design-patterns/  # Design pattern docs (book theme)
├── mcp-for-beginners/        # MCP tutorial series (huge - bundled repo with solutions in 6 languages)
└── tiny-recursive-models/    # ML model docs (book theme)

themes/
├── archie/    # Primary blog theme (Git submodule)
└── book/      # Documentation sections (manually added, not a submodule)

layouts/                      # Theme overrides (3 files)
├── index.html                # Custom homepage
└── _default/
    ├── single.html           # Post template (supports toc + tldr params)
    └── list.html             # List template (renders _index.md content or article list)

static/_redirects             # Netlify redirect rules (legacy /blogs/ → /posts/, etc.)
config/_default/config.toml   # Single config file
netlify.toml                  # Build settings + cache headers
```

## Content Sections

**`mcp-for-beginners/`** is a large bundled repository (~100+ files) with solution code in Python, TypeScript, Java, Rust, C#, and .NET. It includes `.github/`, `.devcontainer/`, and full project scaffolding. Be careful with bulk operations in this directory.

**`agentic-design-patterns/`** and **`tiny-recursive-models/`** use the `book` theme and have `_index.md` section pages.

## Critical Rules

1. **Never edit `public/`** — auto-generated by Hugo
2. **Never edit `themes/`** — use `layouts/` for overrides
3. **Test locally** before committing (`hugo server -D`)
4. **Hugo v0.150.0** locked in `netlify.toml` (local version may differ)
5. **Deploy branch is `master`** — not main

## Netlify Build

```toml
# netlify.toml
[build]
  command = "git submodule update --init --recursive && hugo --gc --minify --cleanDestinationDir"

[build.environment]
  HUGO_VERSION = "0.150.0"
  TZ = "America/Chicago"
```

HTML pages served with `Cache-Control: public, max-age=0, must-revalidate` (aggressive no-cache).

## Config

Main config: `config/_default/config.toml`
- Theme: `archie`
- 6 menu items: Home, Posts, About, Research & Curriculum, Projects, Contact
- Goldmark renderer with unsafe HTML enabled
- Permalinks: `/posts/:slug/`
- Custom CSS loaded via `params.customCSS` (currently references `css/custom.css`)
- Highlight style: `friendly`

## .gitmodules Note

`.gitmodules` references 3 submodules (archie, PaperMod, hugo-bearblog) but only `archie` is active. PaperMod and hugo-bearblog are legacy entries — the `themes/` directory only contains `archie/` and `book/`.
